{
  "version": 3,
  "sources": ["../../mock-socket/dist/mock-socket.js"],
  "sourcesContent": ["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.Mock = global.Mock || {})));\n}(this, (function (exports) { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nvar requiresPort = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) { return false; }\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n\nvar has = Object.prototype.hasOwnProperty;\nvar undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) { continue; }\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) { prefix = '?'; }\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) { continue; }\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nvar stringify = querystringify;\nvar parse = querystring;\n\nvar querystringify_1 = {\n\tstringify: stringify,\n\tparse: parse\n};\n\nvar CRHTLF = /[\\n\\r\\t]/g;\nvar slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//;\nvar protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i;\nvar windowsDriveLetter = /^[a-zA-Z]:/;\nvar whitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/;\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(whitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') { globalVar = window; }\n  else if (typeof commonjsGlobal !== 'undefined') { globalVar = commonjsGlobal; }\n  else if (typeof self !== 'undefined') { globalVar = self; }\n  else { globalVar = {}; }\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) { delete finaldestination[key]; }\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) { continue; }\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4];\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') { return base; }\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) { unshift = true; }\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) { path.unshift(''); }\n  if (last === '.' || last === '..') { path.push(''); }\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) { parser = querystringify_1.parse; }\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) { url[key] = url[key].toLowerCase(); }\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) { url.query = parser(url.query); }\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!requiresPort(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password));\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || querystringify_1.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!requiresPort(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) { value += ':'+ url.port; }\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) { url[ins[1]] = url[ins[1]].toLowerCase(); }\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) { stringify = querystringify_1.stringify; }\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') { protocol += ':'; }\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) { result += ':'+ url.password; }\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':') { host += ':'; }\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) { result += '?' !== query.charAt(0) ? '?'+ query : query; }\n\n  if (url.hash) { result += url.hash; }\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = querystringify_1;\n\nvar urlParse = Url;\n\n/*\n * This delay allows the thread to finish assigning its on* methods\n * before invoking the delay callback. This is purely a timing hack.\n * http://geekabyte.blogspot.com/2014/01/javascript-effect-of-setting-settimeout.html\n *\n * @param {callback: function} the callback which will be invoked after the timeout\n * @parma {context: object} the context in which to invoke the function\n */\nfunction delay(callback, context) {\n  setTimeout(function (timeoutContext) { return callback.call(timeoutContext); }, 4, context);\n}\n\nfunction log(method, message) {\n  /* eslint-disable no-console */\n  if (typeof process !== 'undefined' && process.env.NODE_ENV !== 'test') {\n    console[method].call(null, message);\n  }\n  /* eslint-enable no-console */\n}\n\nfunction reject(array, callback) {\n  if ( array === void 0 ) array = [];\n\n  var results = [];\n  array.forEach(function (itemInArray) {\n    if (!callback(itemInArray)) {\n      results.push(itemInArray);\n    }\n  });\n\n  return results;\n}\n\nfunction filter(array, callback) {\n  if ( array === void 0 ) array = [];\n\n  var results = [];\n  array.forEach(function (itemInArray) {\n    if (callback(itemInArray)) {\n      results.push(itemInArray);\n    }\n  });\n\n  return results;\n}\n\n/*\n * EventTarget is an interface implemented by objects that can\n * receive events and may have listeners for them.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nvar EventTarget = function EventTarget() {\n  this.listeners = {};\n};\n\n/*\n * Ties a listener function to an event type which can later be invoked via the\n * dispatchEvent method.\n *\n * @param {string} type - the type of event (ie: 'open', 'message', etc.)\n * @param {function} listener - callback function to invoke when an event is dispatched matching the type\n * @param {boolean} useCapture - N/A TODO: implement useCapture functionality\n */\nEventTarget.prototype.addEventListener = function addEventListener (type, listener /* , useCapture */) {\n  if (typeof listener === 'function') {\n    if (!Array.isArray(this.listeners[type])) {\n      this.listeners[type] = [];\n    }\n\n    // Only add the same function once\n    if (filter(this.listeners[type], function (item) { return item === listener; }).length === 0) {\n      this.listeners[type].push(listener);\n    }\n  }\n};\n\n/*\n * Removes the listener so it will no longer be invoked via the dispatchEvent method.\n *\n * @param {string} type - the type of event (ie: 'open', 'message', etc.)\n * @param {function} listener - callback function to invoke when an event is dispatched matching the type\n * @param {boolean} useCapture - N/A TODO: implement useCapture functionality\n */\nEventTarget.prototype.removeEventListener = function removeEventListener (type, removingListener /* , useCapture */) {\n  var arrayOfListeners = this.listeners[type];\n  this.listeners[type] = reject(arrayOfListeners, function (listener) { return listener === removingListener; });\n};\n\n/*\n * Invokes all listener functions that are listening to the given event.type property. Each\n * listener will be passed the event as the first argument.\n *\n * @param {object} event - event object which will be passed to all listeners of the event.type property\n */\nEventTarget.prototype.dispatchEvent = function dispatchEvent (event) {\n    var this$1 = this;\n    var customArguments = [], len = arguments.length - 1;\n    while ( len-- > 0 ) customArguments[ len ] = arguments[ len + 1 ];\n\n  var eventName = event.type;\n  var listeners = this.listeners[eventName];\n\n  if (!Array.isArray(listeners)) {\n    return false;\n  }\n\n  listeners.forEach(function (listener) {\n    if (customArguments.length > 0) {\n      listener.apply(this$1, customArguments);\n    } else {\n      listener.call(this$1, event);\n    }\n  });\n\n  return true;\n};\n\nfunction trimQueryPartFromURL(url) {\n  var queryIndex = url.indexOf('?');\n  return queryIndex >= 0 ? url.slice(0, queryIndex) : url;\n}\n\n/*\n * The network bridge is a way for the mock websocket object to 'communicate' with\n * all available servers. This is a singleton object so it is important that you\n * clean up urlMap whenever you are finished.\n */\nvar NetworkBridge = function NetworkBridge() {\n  this.urlMap = {};\n};\n\n/*\n * Attaches a websocket object to the urlMap hash so that it can find the server\n * it is connected to and the server in turn can find it.\n *\n * @param {object} websocket - websocket object to add to the urlMap hash\n * @param {string} url\n */\nNetworkBridge.prototype.attachWebSocket = function attachWebSocket (websocket, url) {\n  var serverURL = trimQueryPartFromURL(url);\n  var connectionLookup = this.urlMap[serverURL];\n\n  if (connectionLookup && connectionLookup.server && connectionLookup.websockets.indexOf(websocket) === -1) {\n    connectionLookup.websockets.push(websocket);\n    return connectionLookup.server;\n  }\n};\n\n/*\n * Attaches a websocket to a room\n */\nNetworkBridge.prototype.addMembershipToRoom = function addMembershipToRoom (websocket, room) {\n  var connectionLookup = this.urlMap[trimQueryPartFromURL(websocket.url)];\n\n  if (connectionLookup && connectionLookup.server && connectionLookup.websockets.indexOf(websocket) !== -1) {\n    if (!connectionLookup.roomMemberships[room]) {\n      connectionLookup.roomMemberships[room] = [];\n    }\n\n    connectionLookup.roomMemberships[room].push(websocket);\n  }\n};\n\n/*\n * Attaches a server object to the urlMap hash so that it can find a websockets\n * which are connected to it and so that websockets can in turn can find it.\n *\n * @param {object} server - server object to add to the urlMap hash\n * @param {string} url\n */\nNetworkBridge.prototype.attachServer = function attachServer (server, url) {\n  var serverUrl = trimQueryPartFromURL(url);\n  var connectionLookup = this.urlMap[serverUrl];\n\n  if (!connectionLookup) {\n    this.urlMap[serverUrl] = {\n      server: server,\n      websockets: [],\n      roomMemberships: {}\n    };\n\n    return server;\n  }\n};\n\n/*\n * Finds the server which is 'running' on the given url.\n *\n * @param {string} url - the url to use to find which server is running on it\n */\nNetworkBridge.prototype.serverLookup = function serverLookup (url) {\n  var serverURL = trimQueryPartFromURL(url);\n  var connectionLookup = this.urlMap[serverURL];\n\n  if (connectionLookup) {\n    return connectionLookup.server;\n  }\n};\n\n/*\n * Finds all websockets which is 'listening' on the given url.\n *\n * @param {string} url - the url to use to find all websockets which are associated with it\n * @param {string} room - if a room is provided, will only return sockets in this room\n * @param {class} broadcaster - socket that is broadcasting and is to be excluded from the lookup\n */\nNetworkBridge.prototype.websocketsLookup = function websocketsLookup (url, room, broadcaster) {\n  var serverURL = trimQueryPartFromURL(url);\n  var websockets;\n  var connectionLookup = this.urlMap[serverURL];\n\n  websockets = connectionLookup ? connectionLookup.websockets : [];\n\n  if (room) {\n    var members = connectionLookup.roomMemberships[room];\n    websockets = members || [];\n  }\n\n  return broadcaster ? websockets.filter(function (websocket) { return websocket !== broadcaster; }) : websockets;\n};\n\n/*\n * Removes the entry associated with the url.\n *\n * @param {string} url\n */\nNetworkBridge.prototype.removeServer = function removeServer (url) {\n  delete this.urlMap[trimQueryPartFromURL(url)];\n};\n\n/*\n * Removes the individual websocket from the map of associated websockets.\n *\n * @param {object} websocket - websocket object to remove from the url map\n * @param {string} url\n */\nNetworkBridge.prototype.removeWebSocket = function removeWebSocket (websocket, url) {\n  var serverURL = trimQueryPartFromURL(url);\n  var connectionLookup = this.urlMap[serverURL];\n\n  if (connectionLookup) {\n    connectionLookup.websockets = reject(connectionLookup.websockets, function (socket) { return socket === websocket; });\n  }\n};\n\n/*\n * Removes a websocket from a room\n */\nNetworkBridge.prototype.removeMembershipFromRoom = function removeMembershipFromRoom (websocket, room) {\n  var connectionLookup = this.urlMap[trimQueryPartFromURL(websocket.url)];\n  var memberships = connectionLookup.roomMemberships[room];\n\n  if (connectionLookup && memberships !== null) {\n    connectionLookup.roomMemberships[room] = reject(memberships, function (socket) { return socket === websocket; });\n  }\n};\n\nvar networkBridge = new NetworkBridge(); // Note: this is a singleton\n\n/*\n * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n */\nvar CLOSE_CODES = {\n  CLOSE_NORMAL: 1000,\n  CLOSE_GOING_AWAY: 1001,\n  CLOSE_PROTOCOL_ERROR: 1002,\n  CLOSE_UNSUPPORTED: 1003,\n  CLOSE_NO_STATUS: 1005,\n  CLOSE_ABNORMAL: 1006,\n  UNSUPPORTED_DATA: 1007,\n  POLICY_VIOLATION: 1008,\n  CLOSE_TOO_LARGE: 1009,\n  MISSING_EXTENSION: 1010,\n  INTERNAL_ERROR: 1011,\n  SERVICE_RESTART: 1012,\n  TRY_AGAIN_LATER: 1013,\n  TLS_HANDSHAKE: 1015\n};\n\nvar ERROR_PREFIX = {\n  CONSTRUCTOR_ERROR: \"Failed to construct 'WebSocket':\",\n  CLOSE_ERROR: \"Failed to execute 'close' on 'WebSocket':\",\n  EVENT: {\n    CONSTRUCT: \"Failed to construct 'Event':\",\n    MESSAGE: \"Failed to construct 'MessageEvent':\",\n    CLOSE: \"Failed to construct 'CloseEvent':\"\n  }\n};\n\nvar EventPrototype = function EventPrototype () {};\n\nEventPrototype.prototype.stopPropagation = function stopPropagation () {};\nEventPrototype.prototype.stopImmediatePropagation = function stopImmediatePropagation () {};\n\n// if no arguments are passed then the type is set to \"undefined\" on\n// chrome and safari.\nEventPrototype.prototype.initEvent = function initEvent (type, bubbles, cancelable) {\n    if ( type === void 0 ) type = 'undefined';\n    if ( bubbles === void 0 ) bubbles = false;\n    if ( cancelable === void 0 ) cancelable = false;\n\n  this.type = \"\" + type;\n  this.bubbles = Boolean(bubbles);\n  this.cancelable = Boolean(cancelable);\n};\n\nvar Event = (function (EventPrototype$$1) {\n  function Event(type, eventInitConfig) {\n    if ( eventInitConfig === void 0 ) eventInitConfig = {};\n\n    EventPrototype$$1.call(this);\n\n    if (!type) {\n      throw new TypeError(((ERROR_PREFIX.EVENT_ERROR) + \" 1 argument required, but only 0 present.\"));\n    }\n\n    if (typeof eventInitConfig !== 'object') {\n      throw new TypeError(((ERROR_PREFIX.EVENT_ERROR) + \" parameter 2 ('eventInitDict') is not an object.\"));\n    }\n\n    var bubbles = eventInitConfig.bubbles;\n    var cancelable = eventInitConfig.cancelable;\n\n    this.type = \"\" + type;\n    this.timeStamp = Date.now();\n    this.target = null;\n    this.srcElement = null;\n    this.returnValue = true;\n    this.isTrusted = false;\n    this.eventPhase = 0;\n    this.defaultPrevented = false;\n    this.currentTarget = null;\n    this.cancelable = cancelable ? Boolean(cancelable) : false;\n    this.cancelBubble = false;\n    this.bubbles = bubbles ? Boolean(bubbles) : false;\n  }\n\n  if ( EventPrototype$$1 ) Event.__proto__ = EventPrototype$$1;\n  Event.prototype = Object.create( EventPrototype$$1 && EventPrototype$$1.prototype );\n  Event.prototype.constructor = Event;\n\n  return Event;\n}(EventPrototype));\n\nvar MessageEvent = (function (EventPrototype$$1) {\n  function MessageEvent(type, eventInitConfig) {\n    if ( eventInitConfig === void 0 ) eventInitConfig = {};\n\n    EventPrototype$$1.call(this);\n\n    if (!type) {\n      throw new TypeError(((ERROR_PREFIX.EVENT.MESSAGE) + \" 1 argument required, but only 0 present.\"));\n    }\n\n    if (typeof eventInitConfig !== 'object') {\n      throw new TypeError(((ERROR_PREFIX.EVENT.MESSAGE) + \" parameter 2 ('eventInitDict') is not an object\"));\n    }\n\n    var bubbles = eventInitConfig.bubbles;\n    var cancelable = eventInitConfig.cancelable;\n    var data = eventInitConfig.data;\n    var origin = eventInitConfig.origin;\n    var lastEventId = eventInitConfig.lastEventId;\n    var ports = eventInitConfig.ports;\n\n    this.type = \"\" + type;\n    this.timeStamp = Date.now();\n    this.target = null;\n    this.srcElement = null;\n    this.returnValue = true;\n    this.isTrusted = false;\n    this.eventPhase = 0;\n    this.defaultPrevented = false;\n    this.currentTarget = null;\n    this.cancelable = cancelable ? Boolean(cancelable) : false;\n    this.canncelBubble = false;\n    this.bubbles = bubbles ? Boolean(bubbles) : false;\n    this.origin = \"\" + origin;\n    this.ports = typeof ports === 'undefined' ? null : ports;\n    this.data = typeof data === 'undefined' ? null : data;\n    this.lastEventId = \"\" + (lastEventId || '');\n  }\n\n  if ( EventPrototype$$1 ) MessageEvent.__proto__ = EventPrototype$$1;\n  MessageEvent.prototype = Object.create( EventPrototype$$1 && EventPrototype$$1.prototype );\n  MessageEvent.prototype.constructor = MessageEvent;\n\n  return MessageEvent;\n}(EventPrototype));\n\nvar CloseEvent = (function (EventPrototype$$1) {\n  function CloseEvent(type, eventInitConfig) {\n    if ( eventInitConfig === void 0 ) eventInitConfig = {};\n\n    EventPrototype$$1.call(this);\n\n    if (!type) {\n      throw new TypeError(((ERROR_PREFIX.EVENT.CLOSE) + \" 1 argument required, but only 0 present.\"));\n    }\n\n    if (typeof eventInitConfig !== 'object') {\n      throw new TypeError(((ERROR_PREFIX.EVENT.CLOSE) + \" parameter 2 ('eventInitDict') is not an object\"));\n    }\n\n    var bubbles = eventInitConfig.bubbles;\n    var cancelable = eventInitConfig.cancelable;\n    var code = eventInitConfig.code;\n    var reason = eventInitConfig.reason;\n    var wasClean = eventInitConfig.wasClean;\n\n    this.type = \"\" + type;\n    this.timeStamp = Date.now();\n    this.target = null;\n    this.srcElement = null;\n    this.returnValue = true;\n    this.isTrusted = false;\n    this.eventPhase = 0;\n    this.defaultPrevented = false;\n    this.currentTarget = null;\n    this.cancelable = cancelable ? Boolean(cancelable) : false;\n    this.cancelBubble = false;\n    this.bubbles = bubbles ? Boolean(bubbles) : false;\n    this.code = typeof code === 'number' ? parseInt(code, 10) : 0;\n    this.reason = \"\" + (reason || '');\n    this.wasClean = wasClean ? Boolean(wasClean) : false;\n  }\n\n  if ( EventPrototype$$1 ) CloseEvent.__proto__ = EventPrototype$$1;\n  CloseEvent.prototype = Object.create( EventPrototype$$1 && EventPrototype$$1.prototype );\n  CloseEvent.prototype.constructor = CloseEvent;\n\n  return CloseEvent;\n}(EventPrototype));\n\n/*\n * Creates an Event object and extends it to allow full modification of\n * its properties.\n *\n * @param {object} config - within config you will need to pass type and optionally target\n */\nfunction createEvent(config) {\n  var type = config.type;\n  var target = config.target;\n  var eventObject = new Event(type);\n\n  if (target) {\n    eventObject.target = target;\n    eventObject.srcElement = target;\n    eventObject.currentTarget = target;\n  }\n\n  return eventObject;\n}\n\n/*\n * Creates a MessageEvent object and extends it to allow full modification of\n * its properties.\n *\n * @param {object} config - within config: type, origin, data and optionally target\n */\nfunction createMessageEvent(config) {\n  var type = config.type;\n  var origin = config.origin;\n  var data = config.data;\n  var target = config.target;\n  var messageEvent = new MessageEvent(type, {\n    data: data,\n    origin: origin\n  });\n\n  if (target) {\n    messageEvent.target = target;\n    messageEvent.srcElement = target;\n    messageEvent.currentTarget = target;\n  }\n\n  return messageEvent;\n}\n\n/*\n * Creates a CloseEvent object and extends it to allow full modification of\n * its properties.\n *\n * @param {object} config - within config: type and optionally target, code, and reason\n */\nfunction createCloseEvent(config) {\n  var code = config.code;\n  var reason = config.reason;\n  var type = config.type;\n  var target = config.target;\n  var wasClean = config.wasClean;\n\n  if (!wasClean) {\n    wasClean = code === CLOSE_CODES.CLOSE_NORMAL || code === CLOSE_CODES.CLOSE_NO_STATUS;\n  }\n\n  var closeEvent = new CloseEvent(type, {\n    code: code,\n    reason: reason,\n    wasClean: wasClean\n  });\n\n  if (target) {\n    closeEvent.target = target;\n    closeEvent.srcElement = target;\n    closeEvent.currentTarget = target;\n  }\n\n  return closeEvent;\n}\n\nfunction closeWebSocketConnection(context, code, reason) {\n  context.readyState = WebSocket$1.CLOSING;\n\n  var server = networkBridge.serverLookup(context.url);\n  var closeEvent = createCloseEvent({\n    type: 'close',\n    target: context.target,\n    code: code,\n    reason: reason\n  });\n\n  delay(function () {\n    networkBridge.removeWebSocket(context, context.url);\n\n    context.readyState = WebSocket$1.CLOSED;\n    context.dispatchEvent(closeEvent);\n\n    if (server) {\n      server.dispatchEvent(closeEvent, server);\n    }\n  }, context);\n}\n\nfunction failWebSocketConnection(context, code, reason) {\n  context.readyState = WebSocket$1.CLOSING;\n\n  var server = networkBridge.serverLookup(context.url);\n  var closeEvent = createCloseEvent({\n    type: 'close',\n    target: context.target,\n    code: code,\n    reason: reason,\n    wasClean: false\n  });\n\n  var errorEvent = createEvent({\n    type: 'error',\n    target: context.target\n  });\n\n  delay(function () {\n    networkBridge.removeWebSocket(context, context.url);\n\n    context.readyState = WebSocket$1.CLOSED;\n    context.dispatchEvent(errorEvent);\n    context.dispatchEvent(closeEvent);\n\n    if (server) {\n      server.dispatchEvent(closeEvent, server);\n    }\n  }, context);\n}\n\nfunction normalizeSendData(data) {\n  if (Object.prototype.toString.call(data) !== '[object Blob]' && !(data instanceof ArrayBuffer)) {\n    data = String(data);\n  }\n\n  return data;\n}\n\nvar proxies = new WeakMap();\n\nfunction proxyFactory(target) {\n  if (proxies.has(target)) {\n    return proxies.get(target);\n  }\n\n  var proxy = new Proxy(target, {\n    get: function get(obj, prop) {\n      if (prop === 'close') {\n        return function close(options) {\n          if ( options === void 0 ) options = {};\n\n          var code = options.code || CLOSE_CODES.CLOSE_NORMAL;\n          var reason = options.reason || '';\n\n          closeWebSocketConnection(proxy, code, reason);\n        };\n      }\n\n      if (prop === 'send') {\n        return function send(data) {\n          data = normalizeSendData(data);\n\n          target.dispatchEvent(\n            createMessageEvent({\n              type: 'message',\n              data: data,\n              origin: this.url,\n              target: target\n            })\n          );\n        };\n      }\n\n      var toSocketName = function (type) { return (type === 'message' ? (\"server::\" + type) : type); };\n      if (prop === 'on') {\n        return function onWrapper(type, cb) {\n          target.addEventListener(toSocketName(type), cb);\n        };\n      }\n      if (prop === 'off') {\n        return function offWrapper(type, cb) {\n          target.removeEventListener(toSocketName(type), cb);\n        };\n      }\n\n      if (prop === 'target') {\n        return target;\n      }\n\n      return obj[prop];\n    }\n  });\n  proxies.set(target, proxy);\n\n  return proxy;\n}\n\nfunction lengthInUtf8Bytes(str) {\n  // Matches only the 10.. bytes that are non-initial characters in a multi-byte sequence.\n  var m = encodeURIComponent(str).match(/%[89ABab]/g);\n  return str.length + (m ? m.length : 0);\n}\n\nfunction urlVerification(url) {\n  var urlRecord = new urlParse(url);\n  var pathname = urlRecord.pathname;\n  var protocol = urlRecord.protocol;\n  var hash = urlRecord.hash;\n\n  if (!url) {\n    throw new TypeError(((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" 1 argument required, but only 0 present.\"));\n  }\n\n  if (!pathname) {\n    urlRecord.pathname = '/';\n  }\n\n  if (protocol === '') {\n    throw new SyntaxError(((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" The URL '\" + (urlRecord.toString()) + \"' is invalid.\"));\n  }\n\n  if (protocol !== 'ws:' && protocol !== 'wss:') {\n    throw new SyntaxError(\n      ((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" The URL's scheme must be either 'ws' or 'wss'. '\" + protocol + \"' is not allowed.\")\n    );\n  }\n\n  if (hash !== '') {\n    /* eslint-disable max-len */\n    throw new SyntaxError(\n      ((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" The URL contains a fragment identifier ('\" + hash + \"'). Fragment identifiers are not allowed in WebSocket URLs.\")\n    );\n    /* eslint-enable max-len */\n  }\n\n  return urlRecord.toString();\n}\n\nfunction protocolVerification(protocols) {\n  if ( protocols === void 0 ) protocols = [];\n\n  if (!Array.isArray(protocols) && typeof protocols !== 'string') {\n    throw new SyntaxError(((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" The subprotocol '\" + (protocols.toString()) + \"' is invalid.\"));\n  }\n\n  if (typeof protocols === 'string') {\n    protocols = [protocols];\n  }\n\n  var uniq = protocols\n    .map(function (p) { return ({ count: 1, protocol: p }); })\n    .reduce(function (a, b) {\n      a[b.protocol] = (a[b.protocol] || 0) + b.count;\n      return a;\n    }, {});\n\n  var duplicates = Object.keys(uniq).filter(function (a) { return uniq[a] > 1; });\n\n  if (duplicates.length > 0) {\n    throw new SyntaxError(((ERROR_PREFIX.CONSTRUCTOR_ERROR) + \" The subprotocol '\" + (duplicates[0]) + \"' is duplicated.\"));\n  }\n\n  return protocols;\n}\n\n/*\n * The main websocket class which is designed to mimick the native WebSocket class as close\n * as possible.\n *\n * https://html.spec.whatwg.org/multipage/web-sockets.html\n */\nvar WebSocket$1 = (function (EventTarget$$1) {\n  function WebSocket(url, protocols) {\n    EventTarget$$1.call(this);\n\n    this._onopen = null;\n    this._onmessage = null;\n    this._onerror = null;\n    this._onclose = null;\n\n    this.url = urlVerification(url);\n    protocols = protocolVerification(protocols);\n    this.protocol = protocols[0] || '';\n\n    this.binaryType = 'blob';\n    this.readyState = WebSocket.CONNECTING;\n\n    var client = proxyFactory(this);\n    var server = networkBridge.attachWebSocket(client, this.url);\n\n    /*\n     * This delay is needed so that we dont trigger an event before the callbacks have been\n     * setup. For example:\n     *\n     * var socket = new WebSocket('ws://localhost');\n     *\n     * If we dont have the delay then the event would be triggered right here and this is\n     * before the onopen had a chance to register itself.\n     *\n     * socket.onopen = () => { // this would never be called };\n     *\n     * and with the delay the event gets triggered here after all of the callbacks have been\n     * registered :-)\n     */\n    delay(function delayCallback() {\n      if (this.readyState !== WebSocket.CONNECTING) {\n        return;\n      }\n      if (server) {\n        if (\n          server.options.verifyClient &&\n          typeof server.options.verifyClient === 'function' &&\n          !server.options.verifyClient()\n        ) {\n          this.readyState = WebSocket.CLOSED;\n\n          log(\n            'error',\n            (\"WebSocket connection to '\" + (this.url) + \"' failed: HTTP Authentication failed; no valid credentials available\")\n          );\n\n          networkBridge.removeWebSocket(client, this.url);\n          this.dispatchEvent(createEvent({ type: 'error', target: this }));\n          this.dispatchEvent(createCloseEvent({ type: 'close', target: this, code: CLOSE_CODES.CLOSE_NORMAL }));\n        } else {\n          if (server.options.selectProtocol && typeof server.options.selectProtocol === 'function') {\n            var selectedProtocol = server.options.selectProtocol(protocols);\n            var isFilled = selectedProtocol !== '';\n            var isRequested = protocols.indexOf(selectedProtocol) !== -1;\n            if (isFilled && !isRequested) {\n              this.readyState = WebSocket.CLOSED;\n\n              log('error', (\"WebSocket connection to '\" + (this.url) + \"' failed: Invalid Sub-Protocol\"));\n\n              networkBridge.removeWebSocket(client, this.url);\n              this.dispatchEvent(createEvent({ type: 'error', target: this }));\n              this.dispatchEvent(createCloseEvent({ type: 'close', target: this, code: CLOSE_CODES.CLOSE_NORMAL }));\n              return;\n            }\n            this.protocol = selectedProtocol;\n          }\n          this.readyState = WebSocket.OPEN;\n          this.dispatchEvent(createEvent({ type: 'open', target: this }));\n          server.dispatchEvent(createEvent({ type: 'connection' }), client);\n        }\n      } else {\n        this.readyState = WebSocket.CLOSED;\n        this.dispatchEvent(createEvent({ type: 'error', target: this }));\n        this.dispatchEvent(createCloseEvent({ type: 'close', target: this, code: CLOSE_CODES.CLOSE_NORMAL }));\n\n        log('error', (\"WebSocket connection to '\" + (this.url) + \"' failed\"));\n      }\n    }, this);\n  }\n\n  if ( EventTarget$$1 ) WebSocket.__proto__ = EventTarget$$1;\n  WebSocket.prototype = Object.create( EventTarget$$1 && EventTarget$$1.prototype );\n  WebSocket.prototype.constructor = WebSocket;\n\n  var prototypeAccessors = { onopen: {},onmessage: {},onclose: {},onerror: {} };\n\n  prototypeAccessors.onopen.get = function () {\n    return this._onopen;\n  };\n\n  prototypeAccessors.onmessage.get = function () {\n    return this._onmessage;\n  };\n\n  prototypeAccessors.onclose.get = function () {\n    return this._onclose;\n  };\n\n  prototypeAccessors.onerror.get = function () {\n    return this._onerror;\n  };\n\n  prototypeAccessors.onopen.set = function (listener) {\n    this.removeEventListener('open', this._onopen);\n    this._onopen = listener;\n    this.addEventListener('open', listener);\n  };\n\n  prototypeAccessors.onmessage.set = function (listener) {\n    this.removeEventListener('message', this._onmessage);\n    this._onmessage = listener;\n    this.addEventListener('message', listener);\n  };\n\n  prototypeAccessors.onclose.set = function (listener) {\n    this.removeEventListener('close', this._onclose);\n    this._onclose = listener;\n    this.addEventListener('close', listener);\n  };\n\n  prototypeAccessors.onerror.set = function (listener) {\n    this.removeEventListener('error', this._onerror);\n    this._onerror = listener;\n    this.addEventListener('error', listener);\n  };\n\n  WebSocket.prototype.send = function send (data) {\n    var this$1 = this;\n\n    if (this.readyState === WebSocket.CONNECTING) {\n      // TODO: node>=17 replace with DOMException\n      throw new Error(\"Failed to execute 'send' on 'WebSocket': Still in CONNECTING state\");\n    }\n\n    // TODO: handle bufferedAmount\n\n    var messageEvent = createMessageEvent({\n      type: 'server::message',\n      origin: this.url,\n      data: normalizeSendData(data)\n    });\n\n    var server = networkBridge.serverLookup(this.url);\n\n    if (server) {\n      delay(function () {\n        this$1.dispatchEvent(messageEvent, data);\n      }, server);\n    }\n  };\n\n  WebSocket.prototype.close = function close (code, reason) {\n    if (code !== undefined) {\n      if (typeof code !== 'number' || (code !== 1000 && (code < 3000 || code > 4999))) {\n        throw new TypeError(\n          ((ERROR_PREFIX.CLOSE_ERROR) + \" The code must be either 1000, or between 3000 and 4999. \" + code + \" is neither.\")\n        );\n      }\n    }\n\n    if (reason !== undefined) {\n      var length = lengthInUtf8Bytes(reason);\n\n      if (length > 123) {\n        throw new SyntaxError(((ERROR_PREFIX.CLOSE_ERROR) + \" The message must not be greater than 123 bytes.\"));\n      }\n    }\n\n    if (this.readyState === WebSocket.CLOSING || this.readyState === WebSocket.CLOSED) {\n      return;\n    }\n\n    var client = proxyFactory(this);\n    if (this.readyState === WebSocket.CONNECTING) {\n      failWebSocketConnection(client, code || CLOSE_CODES.CLOSE_ABNORMAL, reason);\n    } else {\n      closeWebSocketConnection(client, code || CLOSE_CODES.CLOSE_NO_STATUS, reason);\n    }\n  };\n\n  Object.defineProperties( WebSocket.prototype, prototypeAccessors );\n\n  return WebSocket;\n}(EventTarget));\n\nWebSocket$1.CONNECTING = 0;\nWebSocket$1.prototype.CONNECTING = WebSocket$1.CONNECTING;\nWebSocket$1.OPEN = 1;\nWebSocket$1.prototype.OPEN = WebSocket$1.OPEN;\nWebSocket$1.CLOSING = 2;\nWebSocket$1.prototype.CLOSING = WebSocket$1.CLOSING;\nWebSocket$1.CLOSED = 3;\nWebSocket$1.prototype.CLOSED = WebSocket$1.CLOSED;\n\n/*\n * The socket-io class is designed to mimick the real API as closely as possible.\n *\n * http://socket.io/docs/\n */\nvar SocketIO$1 = (function (EventTarget$$1) {\n  function SocketIO(url, protocol) {\n    var this$1 = this;\n    if ( url === void 0 ) url = 'socket.io';\n    if ( protocol === void 0 ) protocol = '';\n\n    EventTarget$$1.call(this);\n\n    this.binaryType = 'blob';\n    var urlRecord = new urlParse(url);\n\n    if (!urlRecord.pathname) {\n      urlRecord.pathname = '/';\n    }\n\n    this.url = urlRecord.toString();\n    this.readyState = SocketIO.CONNECTING;\n    this.protocol = '';\n    this.target = this;\n\n    if (typeof protocol === 'string' || (typeof protocol === 'object' && protocol !== null)) {\n      this.protocol = protocol;\n    } else if (Array.isArray(protocol) && protocol.length > 0) {\n      this.protocol = protocol[0];\n    }\n\n    var server = networkBridge.attachWebSocket(this, this.url);\n\n    /*\n     * Delay triggering the connection events so they can be defined in time.\n     */\n    delay(function delayCallback() {\n      if (server) {\n        this.readyState = SocketIO.OPEN;\n        server.dispatchEvent(createEvent({ type: 'connection' }), server, this);\n        server.dispatchEvent(createEvent({ type: 'connect' }), server, this); // alias\n        this.dispatchEvent(createEvent({ type: 'connect', target: this }));\n      } else {\n        this.readyState = SocketIO.CLOSED;\n        this.dispatchEvent(createEvent({ type: 'error', target: this }));\n        this.dispatchEvent(\n          createCloseEvent({\n            type: 'close',\n            target: this,\n            code: CLOSE_CODES.CLOSE_NORMAL\n          })\n        );\n\n        log('error', (\"Socket.io connection to '\" + (this.url) + \"' failed\"));\n      }\n    }, this);\n\n    /**\n      Add an aliased event listener for close / disconnect\n     */\n    this.addEventListener('close', function (event) {\n      this$1.dispatchEvent(\n        createCloseEvent({\n          type: 'disconnect',\n          target: event.target,\n          code: event.code\n        })\n      );\n    });\n  }\n\n  if ( EventTarget$$1 ) SocketIO.__proto__ = EventTarget$$1;\n  SocketIO.prototype = Object.create( EventTarget$$1 && EventTarget$$1.prototype );\n  SocketIO.prototype.constructor = SocketIO;\n\n  var prototypeAccessors = { broadcast: {} };\n\n  /*\n   * Closes the SocketIO connection or connection attempt, if any.\n   * If the connection is already CLOSED, this method does nothing.\n   */\n  SocketIO.prototype.close = function close () {\n    if (this.readyState !== SocketIO.OPEN) {\n      return undefined;\n    }\n\n    var server = networkBridge.serverLookup(this.url);\n    networkBridge.removeWebSocket(this, this.url);\n\n    this.readyState = SocketIO.CLOSED;\n    this.dispatchEvent(\n      createCloseEvent({\n        type: 'close',\n        target: this,\n        code: CLOSE_CODES.CLOSE_NORMAL\n      })\n    );\n\n    if (server) {\n      server.dispatchEvent(\n        createCloseEvent({\n          type: 'disconnect',\n          target: this,\n          code: CLOSE_CODES.CLOSE_NORMAL\n        }),\n        server\n      );\n    }\n\n    return this;\n  };\n\n  /*\n   * Alias for Socket#close\n   *\n   * https://github.com/socketio/socket.io-client/blob/master/lib/socket.js#L383\n   */\n  SocketIO.prototype.disconnect = function disconnect () {\n    return this.close();\n  };\n\n  /*\n   * Submits an event to the server with a payload\n   */\n  SocketIO.prototype.emit = function emit (event) {\n    var data = [], len = arguments.length - 1;\n    while ( len-- > 0 ) data[ len ] = arguments[ len + 1 ];\n\n    if (this.readyState !== SocketIO.OPEN) {\n      throw new Error('SocketIO is already in CLOSING or CLOSED state');\n    }\n\n    var messageEvent = createMessageEvent({\n      type: event,\n      origin: this.url,\n      data: data\n    });\n\n    var server = networkBridge.serverLookup(this.url);\n\n    if (server) {\n      server.dispatchEvent.apply(server, [ messageEvent ].concat( data ));\n    }\n\n    return this;\n  };\n\n  /*\n   * Submits a 'message' event to the server.\n   *\n   * Should behave exactly like WebSocket#send\n   *\n   * https://github.com/socketio/socket.io-client/blob/master/lib/socket.js#L113\n   */\n  SocketIO.prototype.send = function send (data) {\n    this.emit('message', data);\n    return this;\n  };\n\n  /*\n   * For broadcasting events to other connected sockets.\n   *\n   * e.g. socket.broadcast.emit('hi!');\n   * e.g. socket.broadcast.to('my-room').emit('hi!');\n   */\n  prototypeAccessors.broadcast.get = function () {\n    if (this.readyState !== SocketIO.OPEN) {\n      throw new Error('SocketIO is already in CLOSING or CLOSED state');\n    }\n\n    var self = this;\n    var server = networkBridge.serverLookup(this.url);\n    if (!server) {\n      throw new Error((\"SocketIO can not find a server at the specified URL (\" + (this.url) + \")\"));\n    }\n\n    return {\n      emit: function emit(event, data) {\n        server.emit(event, data, { websockets: networkBridge.websocketsLookup(self.url, null, self) });\n        return self;\n      },\n      to: function to(room) {\n        return server.to(room, self);\n      },\n      in: function in$1(room) {\n        return server.in(room, self);\n      }\n    };\n  };\n\n  /*\n   * For registering events to be received from the server\n   */\n  SocketIO.prototype.on = function on (type, callback) {\n    this.addEventListener(type, callback);\n    return this;\n  };\n\n  /*\n   * Remove event listener\n   *\n   * https://github.com/component/emitter#emitteroffevent-fn\n   */\n  SocketIO.prototype.off = function off (type, callback) {\n    this.removeEventListener(type, callback);\n  };\n\n  /*\n   * Check if listeners have already been added for an event\n   *\n   * https://github.com/component/emitter#emitterhaslistenersevent\n   */\n  SocketIO.prototype.hasListeners = function hasListeners (type) {\n    var listeners = this.listeners[type];\n    if (!Array.isArray(listeners)) {\n      return false;\n    }\n    return !!listeners.length;\n  };\n\n  /*\n   * Join a room on a server\n   *\n   * http://socket.io/docs/rooms-and-namespaces/#joining-and-leaving\n   */\n  SocketIO.prototype.join = function join (room) {\n    networkBridge.addMembershipToRoom(this, room);\n  };\n\n  /*\n   * Get the websocket to leave the room\n   *\n   * http://socket.io/docs/rooms-and-namespaces/#joining-and-leaving\n   */\n  SocketIO.prototype.leave = function leave (room) {\n    networkBridge.removeMembershipFromRoom(this, room);\n  };\n\n  SocketIO.prototype.to = function to (room) {\n    return this.broadcast.to(room);\n  };\n\n  SocketIO.prototype.in = function in$1 () {\n    return this.to.apply(null, arguments);\n  };\n\n  /*\n   * Invokes all listener functions that are listening to the given event.type property. Each\n   * listener will be passed the event as the first argument.\n   *\n   * @param {object} event - event object which will be passed to all listeners of the event.type property\n   */\n  SocketIO.prototype.dispatchEvent = function dispatchEvent (event) {\n    var this$1 = this;\n    var customArguments = [], len = arguments.length - 1;\n    while ( len-- > 0 ) customArguments[ len ] = arguments[ len + 1 ];\n\n    var eventName = event.type;\n    var listeners = this.listeners[eventName];\n\n    if (!Array.isArray(listeners)) {\n      return false;\n    }\n\n    listeners.forEach(function (listener) {\n      if (customArguments.length > 0) {\n        listener.apply(this$1, customArguments);\n      } else {\n        // Regular WebSockets expect a MessageEvent but Socketio.io just wants raw data\n        //  payload instanceof MessageEvent works, but you can't isntance of NodeEvent\n        //  for now we detect if the output has data defined on it\n        listener.call(this$1, event.data ? event.data : event);\n      }\n    });\n  };\n\n  Object.defineProperties( SocketIO.prototype, prototypeAccessors );\n\n  return SocketIO;\n}(EventTarget));\n\nSocketIO$1.CONNECTING = 0;\nSocketIO$1.OPEN = 1;\nSocketIO$1.CLOSING = 2;\nSocketIO$1.CLOSED = 3;\n\n/*\n * Static constructor methods for the IO Socket\n */\nvar IO = function ioConstructor(url, protocol) {\n  return new SocketIO$1(url, protocol);\n};\n\n/*\n * Alias the raw IO() constructor\n */\nIO.connect = function ioConnect(url, protocol) {\n  /* eslint-disable new-cap */\n  return IO(url, protocol);\n  /* eslint-enable new-cap */\n};\n\nvar dedupe = function (arr) { return arr.reduce(function (deduped, b) {\n    if (deduped.indexOf(b) > -1) { return deduped; }\n    return deduped.concat(b);\n  }, []); };\n\nfunction retrieveGlobalObject() {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  return typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this;\n}\n\nvar defaultOptions = {\n  mock: true,\n  verifyClient: null,\n  selectProtocol: null\n};\n\nvar Server$1 = (function (EventTarget$$1) {\n  function Server(url, options) {\n    if ( options === void 0 ) options = defaultOptions;\n\n    EventTarget$$1.call(this);\n    var urlRecord = new urlParse(url);\n\n    if (!urlRecord.pathname) {\n      urlRecord.pathname = '/';\n    }\n\n    this.url = urlRecord.toString();\n\n    this.originalWebSocket = null;\n    var server = networkBridge.attachServer(this, this.url);\n\n    if (!server) {\n      this.dispatchEvent(createEvent({ type: 'error' }));\n      throw new Error('A mock server is already listening on this url');\n    }\n\n    this.options = Object.assign({}, defaultOptions, options);\n\n    if (this.options.mock) {\n      this.mockWebsocket();\n    }\n  }\n\n  if ( EventTarget$$1 ) Server.__proto__ = EventTarget$$1;\n  Server.prototype = Object.create( EventTarget$$1 && EventTarget$$1.prototype );\n  Server.prototype.constructor = Server;\n\n  /*\n   * Attaches the mock websocket object to the global object\n   */\n  Server.prototype.mockWebsocket = function mockWebsocket () {\n    var globalObj = retrieveGlobalObject();\n\n    this.originalWebSocket = globalObj.WebSocket;\n    globalObj.WebSocket = WebSocket$1;\n  };\n\n  /*\n   * Removes the mock websocket object from the global object\n   */\n  Server.prototype.restoreWebsocket = function restoreWebsocket () {\n    var globalObj = retrieveGlobalObject();\n\n    if (this.originalWebSocket !== null) {\n      globalObj.WebSocket = this.originalWebSocket;\n    }\n\n    this.originalWebSocket = null;\n  };\n\n  /**\n   * Removes itself from the urlMap so another server could add itself to the url.\n   * @param {function} callback - The callback is called when the server is stopped\n   */\n  Server.prototype.stop = function stop (callback) {\n    if ( callback === void 0 ) callback = function () {};\n\n    if (this.options.mock) {\n      this.restoreWebsocket();\n    }\n\n    networkBridge.removeServer(this.url);\n\n    if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  /*\n   * This is the main function for the mock server to subscribe to the on events.\n   *\n   * ie: mockServer.on('connection', function() { console.log('a mock client connected'); });\n   *\n   * @param {string} type - The event key to subscribe to. Valid keys are: connection, message, and close.\n   * @param {function} callback - The callback which should be called when a certain event is fired.\n   */\n  Server.prototype.on = function on (type, callback) {\n    this.addEventListener(type, callback);\n  };\n\n  /*\n   * Remove event listener\n   */\n  Server.prototype.off = function off (type, callback) {\n    this.removeEventListener(type, callback);\n  };\n\n  /*\n   * Closes the connection and triggers the onclose method of all listening\n   * websockets. After that it removes itself from the urlMap so another server\n   * could add itself to the url.\n   *\n   * @param {object} options\n   */\n  Server.prototype.close = function close (options) {\n    if ( options === void 0 ) options = {};\n\n    var code = options.code;\n    var reason = options.reason;\n    var wasClean = options.wasClean;\n    var listeners = networkBridge.websocketsLookup(this.url);\n\n    // Remove server before notifications to prevent immediate reconnects from\n    // socket onclose handlers\n    networkBridge.removeServer(this.url);\n\n    listeners.forEach(function (socket) {\n      socket.readyState = WebSocket$1.CLOSED;\n      socket.dispatchEvent(\n        createCloseEvent({\n          type: 'close',\n          target: socket.target,\n          code: code || CLOSE_CODES.CLOSE_NORMAL,\n          reason: reason || '',\n          wasClean: wasClean\n        })\n      );\n    });\n\n    this.dispatchEvent(createCloseEvent({ type: 'close' }), this);\n  };\n\n  /*\n   * Sends a generic message event to all mock clients.\n   */\n  Server.prototype.emit = function emit (event, data, options) {\n    var this$1 = this;\n    if ( options === void 0 ) options = {};\n\n    var websockets = options.websockets;\n\n    if (!websockets) {\n      websockets = networkBridge.websocketsLookup(this.url);\n    }\n\n    var normalizedData;\n    if (typeof options !== 'object' || arguments.length > 3) {\n      data = Array.prototype.slice.call(arguments, 1, arguments.length);\n      normalizedData = data.map(function (item) { return normalizeSendData(item); });\n    } else {\n      normalizedData = normalizeSendData(data);\n    }\n\n    websockets.forEach(function (socket) {\n      var messageData = socket instanceof SocketIO$1 ? data : normalizedData;\n      if (Array.isArray(messageData)) {\n        socket.dispatchEvent.apply(\n          socket, [ createMessageEvent({\n            type: event,\n            data: messageData,\n            origin: this$1.url,\n            target: socket.target\n          }) ].concat( messageData )\n        );\n      } else {\n        socket.dispatchEvent(\n          createMessageEvent({\n            type: event,\n            data: messageData,\n            origin: this$1.url,\n            target: socket.target\n          })\n        );\n      }\n    });\n  };\n\n  /*\n   * Returns an array of websockets which are listening to this server\n   * TOOD: this should return a set and not be a method\n   */\n  Server.prototype.clients = function clients () {\n    return networkBridge.websocketsLookup(this.url);\n  };\n\n  /*\n   * Prepares a method to submit an event to members of the room\n   *\n   * e.g. server.to('my-room').emit('hi!');\n   */\n  Server.prototype.to = function to (room, broadcaster, broadcastList) {\n    var this$1 = this;\n    if ( broadcastList === void 0 ) broadcastList = [];\n\n    var self = this;\n    var websockets = dedupe(broadcastList.concat(networkBridge.websocketsLookup(this.url, room, broadcaster)));\n\n    return {\n      to: function (chainedRoom, chainedBroadcaster) { return this$1.to.call(this$1, chainedRoom, chainedBroadcaster, websockets); },\n      emit: function emit(event, data) {\n        self.emit(event, data, { websockets: websockets });\n      }\n    };\n  };\n\n  /*\n   * Alias for Server.to\n   */\n  Server.prototype.in = function in$1 () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    return this.to.apply(null, args);\n  };\n\n  /*\n   * Simulate an event from the server to the clients. Useful for\n   * simulating errors.\n   */\n  Server.prototype.simulate = function simulate (event) {\n    var listeners = networkBridge.websocketsLookup(this.url);\n\n    if (event === 'error') {\n      listeners.forEach(function (socket) {\n        socket.readyState = WebSocket$1.CLOSED;\n        socket.dispatchEvent(createEvent({ type: 'error', target: socket.target }));\n      });\n    }\n  };\n\n  return Server;\n}(EventTarget));\n\n/*\n * Alternative constructor to support namespaces in socket.io\n *\n * http://socket.io/docs/rooms-and-namespaces/#custom-namespaces\n */\nServer$1.of = function of(url) {\n  return new Server$1(url);\n};\n\nvar Server = Server$1;\nvar WebSocket = WebSocket$1;\nvar SocketIO$$1 = IO;\n\nexports.Server = Server;\nexports.WebSocket = WebSocket;\nexports.SocketIO = SocketIO$$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],
  "mappings": ";;;;;;AAAA;AAAA;AAAA,KAAC,SAAUA,SAAQ,SAAS;AAC3B,aAAO,YAAY,YAAY,OAAO,WAAW,cAAc,QAAQ,OAAO,IAC9E,OAAO,WAAW,cAAc,OAAO,MAAM,OAAO,CAAC,SAAS,GAAG,OAAO,IACvE,QAASA,QAAO,OAAOA,QAAO,QAAQ,CAAC,CAAE;AAAA,IAC3C,GAAE,SAAO,SAAUC,UAAS;AAAE;AAE9B,UAAI,iBAAiB,OAAO,WAAW,cAAc,SAAS,OAAO,WAAW,cAAc,SAAS,OAAO,SAAS,cAAc,OAAO,CAAC;AAW7I,UAAI,eAAe,SAAS,SAAS,MAAM,UAAU;AACnD,mBAAW,SAAS,MAAM,GAAG,EAAE,CAAC;AAChC,eAAO,CAAC;AAER,YAAI,CAAC,MAAM;AAAE,iBAAO;AAAA,QAAO;AAE3B,gBAAQ,UAAU;AAAA,UAChB,KAAK;AAAA,UACL,KAAK;AACL,mBAAO,SAAS;AAAA,UAEhB,KAAK;AAAA,UACL,KAAK;AACL,mBAAO,SAAS;AAAA,UAEhB,KAAK;AACL,mBAAO,SAAS;AAAA,UAEhB,KAAK;AACL,mBAAO,SAAS;AAAA,UAEhB,KAAK;AACL,mBAAO;AAAA,QACT;AAEA,eAAO,SAAS;AAAA,MAClB;AAEA,UAAI,MAAM,OAAO,UAAU;AAC3B,UAAI;AASJ,eAAS,OAAO,OAAO;AACrB,YAAI;AACF,iBAAO,mBAAmB,MAAM,QAAQ,OAAO,GAAG,CAAC;AAAA,QACrD,SAAS,GAAG;AACV,iBAAO;AAAA,QACT;AAAA,MACF;AASA,eAAS,OAAO,OAAO;AACrB,YAAI;AACF,iBAAO,mBAAmB,KAAK;AAAA,QACjC,SAAS,GAAG;AACV,iBAAO;AAAA,QACT;AAAA,MACF;AASA,eAAS,YAAY,OAAO;AAC1B,YAAI,SAAS,wBACT,SAAS,CAAC,GACV;AAEJ,eAAO,OAAO,OAAO,KAAK,KAAK,GAAG;AAChC,cAAI,MAAM,OAAO,KAAK,CAAC,CAAC,GACpB,QAAQ,OAAO,KAAK,CAAC,CAAC;AAU1B,cAAI,QAAQ,QAAQ,UAAU,QAAQ,OAAO,QAAQ;AAAE;AAAA,UAAU;AACjE,iBAAO,GAAG,IAAI;AAAA,QAChB;AAEA,eAAO;AAAA,MACT;AAUA,eAAS,eAAe,KAAK,QAAQ;AACnC,iBAAS,UAAU;AAEnB,YAAI,QAAQ,CAAC,GACT,OACA;AAKJ,YAAI,aAAa,OAAO,QAAQ;AAAE,mBAAS;AAAA,QAAK;AAEhD,aAAK,OAAO,KAAK;AACf,cAAI,IAAI,KAAK,KAAK,GAAG,GAAG;AACtB,oBAAQ,IAAI,GAAG;AAMf,gBAAI,CAAC,UAAU,UAAU,QAAQ,UAAU,SAAS,MAAM,KAAK,IAAI;AACjE,sBAAQ;AAAA,YACV;AAEA,kBAAM,OAAO,GAAG;AAChB,oBAAQ,OAAO,KAAK;AAMpB,gBAAI,QAAQ,QAAQ,UAAU,MAAM;AAAE;AAAA,YAAU;AAChD,kBAAM,KAAK,MAAK,MAAK,KAAK;AAAA,UAC5B;AAAA,QACF;AAEA,eAAO,MAAM,SAAS,SAAS,MAAM,KAAK,GAAG,IAAI;AAAA,MACnD;AAKA,UAAI,YAAY;AAChB,UAAI,QAAQ;AAEZ,UAAI,mBAAmB;AAAA,QACtB;AAAA,QACA;AAAA,MACD;AAEA,UAAI,SAAS;AACb,UAAI,UAAU;AACd,UAAI,aAAa;AACjB,UAAI,qBAAqB;AACzB,UAAI,aAAa;AAQjB,eAAS,SAAS,KAAK;AACrB,gBAAQ,MAAM,MAAM,IAAI,SAAS,EAAE,QAAQ,YAAY,EAAE;AAAA,MAC3D;AAcA,UAAI,QAAQ;AAAA,QACV,CAAC,KAAK,MAAM;AAAA;AAAA,QACZ,CAAC,KAAK,OAAO;AAAA;AAAA,QACb,SAAS,SAAS,SAAS,KAAK;AAC9B,iBAAO,UAAU,IAAI,QAAQ,IAAI,QAAQ,QAAQ,OAAO,GAAG,IAAI;AAAA,QACjE;AAAA,QACA,CAAC,KAAK,UAAU;AAAA;AAAA,QAChB,CAAC,KAAK,QAAQ,CAAC;AAAA;AAAA,QACf,CAAC,KAAK,QAAQ,QAAW,GAAG,CAAC;AAAA;AAAA,QAC7B,CAAC,WAAW,QAAQ,QAAW,CAAC;AAAA;AAAA,QAChC,CAAC,KAAK,YAAY,QAAW,GAAG,CAAC;AAAA;AAAA,MACnC;AAUA,UAAI,SAAS,EAAE,MAAM,GAAG,OAAO,EAAE;AAcjC,eAAS,UAAU,KAAK;AACtB,YAAI;AAEJ,YAAI,OAAO,WAAW,aAAa;AAAE,sBAAY;AAAA,QAAQ,WAChD,OAAO,mBAAmB,aAAa;AAAE,sBAAY;AAAA,QAAgB,WACrE,OAAO,SAAS,aAAa;AAAE,sBAAY;AAAA,QAAM,OACrD;AAAE,sBAAY,CAAC;AAAA,QAAG;AAEvB,YAAI,WAAW,UAAU,YAAY,CAAC;AACtC,cAAM,OAAO;AAEb,YAAI,mBAAmB,CAAC,GACpB,OAAO,OAAO,KACd;AAEJ,YAAI,YAAY,IAAI,UAAU;AAC5B,6BAAmB,IAAI,IAAI,SAAS,IAAI,QAAQ,GAAG,CAAC,CAAC;AAAA,QACvD,WAAW,aAAa,MAAM;AAC5B,6BAAmB,IAAI,IAAI,KAAK,CAAC,CAAC;AAClC,eAAK,OAAO,QAAQ;AAAE,mBAAO,iBAAiB,GAAG;AAAA,UAAG;AAAA,QACtD,WAAW,aAAa,MAAM;AAC5B,eAAK,OAAO,KAAK;AACf,gBAAI,OAAO,QAAQ;AAAE;AAAA,YAAU;AAC/B,6BAAiB,GAAG,IAAI,IAAI,GAAG;AAAA,UACjC;AAEA,cAAI,iBAAiB,YAAY,QAAW;AAC1C,6BAAiB,UAAU,QAAQ,KAAK,IAAI,IAAI;AAAA,UAClD;AAAA,QACF;AAEA,eAAO;AAAA,MACT;AASA,eAAS,UAAU,QAAQ;AACzB,eACE,WAAW,WACX,WAAW,UACX,WAAW,WACX,WAAW,YACX,WAAW,SACX,WAAW;AAAA,MAEf;AAkBA,eAAS,gBAAgB,SAAS,UAAU;AAC1C,kBAAU,SAAS,OAAO;AAC1B,kBAAU,QAAQ,QAAQ,QAAQ,EAAE;AACpC,mBAAW,YAAY,CAAC;AAExB,YAAI,QAAQ,WAAW,KAAK,OAAO;AACnC,YAAI,WAAW,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,YAAY,IAAI;AACnD,YAAI,iBAAiB,CAAC,CAAC,MAAM,CAAC;AAC9B,YAAI,eAAe,CAAC,CAAC,MAAM,CAAC;AAC5B,YAAI,eAAe;AACnB,YAAI;AAEJ,YAAI,gBAAgB;AAClB,cAAI,cAAc;AAChB,mBAAO,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC;AACpC,2BAAe,MAAM,CAAC,EAAE,SAAS,MAAM,CAAC,EAAE;AAAA,UAC5C,OAAO;AACL,mBAAO,MAAM,CAAC,IAAI,MAAM,CAAC;AACzB,2BAAe,MAAM,CAAC,EAAE;AAAA,UAC1B;AAAA,QACF,OAAO;AACL,cAAI,cAAc;AAChB,mBAAO,MAAM,CAAC,IAAI,MAAM,CAAC;AACzB,2BAAe,MAAM,CAAC,EAAE;AAAA,UAC1B,OAAO;AACL,mBAAO,MAAM,CAAC;AAAA,UAChB;AAAA,QACF;AAEA,YAAI,aAAa,SAAS;AACxB,cAAI,gBAAgB,GAAG;AACrB,mBAAO,KAAK,MAAM,CAAC;AAAA,UACrB;AAAA,QACF,WAAW,UAAU,QAAQ,GAAG;AAC9B,iBAAO,MAAM,CAAC;AAAA,QAChB,WAAW,UAAU;AACnB,cAAI,gBAAgB;AAClB,mBAAO,KAAK,MAAM,CAAC;AAAA,UACrB;AAAA,QACF,WAAW,gBAAgB,KAAK,UAAU,SAAS,QAAQ,GAAG;AAC5D,iBAAO,MAAM,CAAC;AAAA,QAChB;AAEA,eAAO;AAAA,UACL;AAAA,UACA,SAAS,kBAAkB,UAAU,QAAQ;AAAA,UAC7C;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAUA,eAAS,QAAQ,UAAU,MAAM;AAC/B,YAAI,aAAa,IAAI;AAAE,iBAAO;AAAA,QAAM;AAEpC,YAAI,QAAQ,QAAQ,KAAK,MAAM,GAAG,EAAE,MAAM,GAAG,EAAE,EAAE,OAAO,SAAS,MAAM,GAAG,CAAC,GACvE,IAAI,KAAK,QACT,OAAO,KAAK,IAAI,CAAC,GACjB,UAAU,OACV,KAAK;AAET,eAAO,KAAK;AACV,cAAI,KAAK,CAAC,MAAM,KAAK;AACnB,iBAAK,OAAO,GAAG,CAAC;AAAA,UAClB,WAAW,KAAK,CAAC,MAAM,MAAM;AAC3B,iBAAK,OAAO,GAAG,CAAC;AAChB;AAAA,UACF,WAAW,IAAI;AACb,gBAAI,MAAM,GAAG;AAAE,wBAAU;AAAA,YAAM;AAC/B,iBAAK,OAAO,GAAG,CAAC;AAChB;AAAA,UACF;AAAA,QACF;AAEA,YAAI,SAAS;AAAE,eAAK,QAAQ,EAAE;AAAA,QAAG;AACjC,YAAI,SAAS,OAAO,SAAS,MAAM;AAAE,eAAK,KAAK,EAAE;AAAA,QAAG;AAEpD,eAAO,KAAK,KAAK,GAAG;AAAA,MACtB;AAgBA,eAAS,IAAI,SAAS,UAAU,QAAQ;AACtC,kBAAU,SAAS,OAAO;AAC1B,kBAAU,QAAQ,QAAQ,QAAQ,EAAE;AAEpC,YAAI,EAAE,gBAAgB,MAAM;AAC1B,iBAAO,IAAI,IAAI,SAAS,UAAU,MAAM;AAAA,QAC1C;AAEA,YAAI,UAAU,WAAWC,QAAO,aAAa,OAAO,KAChD,eAAe,MAAM,MAAM,GAC3B,OAAO,OAAO,UACd,MAAM,MACN,IAAI;AAaR,YAAI,aAAa,QAAQ,aAAa,MAAM;AAC1C,mBAAS;AACT,qBAAW;AAAA,QACb;AAEA,YAAI,UAAU,eAAe,OAAO,QAAQ;AAAE,mBAAS,iBAAiB;AAAA,QAAO;AAE/E,mBAAW,UAAU,QAAQ;AAK7B,oBAAY,gBAAgB,WAAW,IAAI,QAAQ;AACnD,mBAAW,CAAC,UAAU,YAAY,CAAC,UAAU;AAC7C,YAAI,UAAU,UAAU,WAAW,YAAY,SAAS;AACxD,YAAI,WAAW,UAAU,YAAY,SAAS,YAAY;AAC1D,kBAAU,UAAU;AAMpB,YACE,UAAU,aAAa,YACrB,UAAU,iBAAiB,KAAK,mBAAmB,KAAK,OAAO,MAChE,CAAC,UAAU,YACT,UAAU,YACT,UAAU,eAAe,KACzB,CAAC,UAAU,IAAI,QAAQ,IAC3B;AACA,uBAAa,CAAC,IAAI,CAAC,QAAQ,UAAU;AAAA,QACvC;AAEA,eAAO,IAAI,aAAa,QAAQ,KAAK;AACnC,wBAAc,aAAa,CAAC;AAE5B,cAAI,OAAO,gBAAgB,YAAY;AACrC,sBAAU,YAAY,SAAS,GAAG;AAClC;AAAA,UACF;AAEA,UAAAA,SAAQ,YAAY,CAAC;AACrB,gBAAM,YAAY,CAAC;AAEnB,cAAIA,WAAUA,QAAO;AACnB,gBAAI,GAAG,IAAI;AAAA,UACb,WAAW,aAAa,OAAOA,QAAO;AACpC,oBAAQA,WAAU,MACd,QAAQ,YAAYA,MAAK,IACzB,QAAQ,QAAQA,MAAK;AAEzB,gBAAI,CAAC,OAAO;AACV,kBAAI,aAAa,OAAO,YAAY,CAAC,GAAG;AACtC,oBAAI,GAAG,IAAI,QAAQ,MAAM,GAAG,KAAK;AACjC,0BAAU,QAAQ,MAAM,QAAQ,YAAY,CAAC,CAAC;AAAA,cAChD,OAAO;AACL,oBAAI,GAAG,IAAI,QAAQ,MAAM,KAAK;AAC9B,0BAAU,QAAQ,MAAM,GAAG,KAAK;AAAA,cAClC;AAAA,YACF;AAAA,UACF,WAAY,QAAQA,OAAM,KAAK,OAAO,GAAI;AACxC,gBAAI,GAAG,IAAI,MAAM,CAAC;AAClB,sBAAU,QAAQ,MAAM,GAAG,MAAM,KAAK;AAAA,UACxC;AAEA,cAAI,GAAG,IAAI,IAAI,GAAG,MAChB,YAAY,YAAY,CAAC,IAAI,SAAS,GAAG,KAAK,KAAK;AAOrD,cAAI,YAAY,CAAC,GAAG;AAAE,gBAAI,GAAG,IAAI,IAAI,GAAG,EAAE,YAAY;AAAA,UAAG;AAAA,QAC3D;AAOA,YAAI,QAAQ;AAAE,cAAI,QAAQ,OAAO,IAAI,KAAK;AAAA,QAAG;AAK7C,YACI,YACC,SAAS,WACT,IAAI,SAAS,OAAO,CAAC,MAAM,QAC1B,IAAI,aAAa,MAAM,SAAS,aAAa,KACjD;AACA,cAAI,WAAW,QAAQ,IAAI,UAAU,SAAS,QAAQ;AAAA,QACxD;AAMA,YAAI,IAAI,SAAS,OAAO,CAAC,MAAM,OAAO,UAAU,IAAI,QAAQ,GAAG;AAC7D,cAAI,WAAW,MAAM,IAAI;AAAA,QAC3B;AAOA,YAAI,CAAC,aAAa,IAAI,MAAM,IAAI,QAAQ,GAAG;AACzC,cAAI,OAAO,IAAI;AACf,cAAI,OAAO;AAAA,QACb;AAKA,YAAI,WAAW,IAAI,WAAW;AAE9B,YAAI,IAAI,MAAM;AACZ,kBAAQ,IAAI,KAAK,QAAQ,GAAG;AAE5B,cAAI,CAAC,OAAO;AACV,gBAAI,WAAW,IAAI,KAAK,MAAM,GAAG,KAAK;AACtC,gBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAElE,gBAAI,WAAW,IAAI,KAAK,MAAM,QAAQ,CAAC;AACvC,gBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAAA,UACpE,OAAO;AACL,gBAAI,WAAW,mBAAmB,mBAAmB,IAAI,IAAI,CAAC;AAAA,UAChE;AAEA,cAAI,OAAO,IAAI,WAAW,IAAI,WAAU,MAAK,IAAI,WAAW,IAAI;AAAA,QAClE;AAEA,YAAI,SAAS,IAAI,aAAa,WAAW,UAAU,IAAI,QAAQ,KAAK,IAAI,OACpE,IAAI,WAAU,OAAM,IAAI,OACxB;AAKJ,YAAI,OAAO,IAAI,SAAS;AAAA,MAC1B;AAeA,eAAS,IAAI,MAAM,OAAO,IAAI;AAC5B,YAAI,MAAM;AAEV,gBAAQ,MAAM;AAAA,UACZ,KAAK;AACH,gBAAI,aAAa,OAAO,SAAS,MAAM,QAAQ;AAC7C,uBAAS,MAAM,iBAAiB,OAAO,KAAK;AAAA,YAC9C;AAEA,gBAAI,IAAI,IAAI;AACZ;AAAA,UAEF,KAAK;AACH,gBAAI,IAAI,IAAI;AAEZ,gBAAI,CAAC,aAAa,OAAO,IAAI,QAAQ,GAAG;AACtC,kBAAI,OAAO,IAAI;AACf,kBAAI,IAAI,IAAI;AAAA,YACd,WAAW,OAAO;AAChB,kBAAI,OAAO,IAAI,WAAU,MAAK;AAAA,YAChC;AAEA;AAAA,UAEF,KAAK;AACH,gBAAI,IAAI,IAAI;AAEZ,gBAAI,IAAI,MAAM;AAAE,uBAAS,MAAK,IAAI;AAAA,YAAM;AACxC,gBAAI,OAAO;AACX;AAAA,UAEF,KAAK;AACH,gBAAI,IAAI,IAAI;AAEZ,gBAAI,QAAQ,KAAK,KAAK,GAAG;AACvB,sBAAQ,MAAM,MAAM,GAAG;AACvB,kBAAI,OAAO,MAAM,IAAI;AACrB,kBAAI,WAAW,MAAM,KAAK,GAAG;AAAA,YAC/B,OAAO;AACL,kBAAI,WAAW;AACf,kBAAI,OAAO;AAAA,YACb;AAEA;AAAA,UAEF,KAAK;AACH,gBAAI,WAAW,MAAM,YAAY;AACjC,gBAAI,UAAU,CAAC;AACf;AAAA,UAEF,KAAK;AAAA,UACL,KAAK;AACH,gBAAI,OAAO;AACT,kBAAI,OAAO,SAAS,aAAa,MAAM;AACvC,kBAAI,IAAI,IAAI,MAAM,OAAO,CAAC,MAAM,OAAO,OAAO,QAAQ;AAAA,YACxD,OAAO;AACL,kBAAI,IAAI,IAAI;AAAA,YACd;AACA;AAAA,UAEF,KAAK;AAAA,UACL,KAAK;AACH,gBAAI,IAAI,IAAI,mBAAmB,KAAK;AACpC;AAAA,UAEF,KAAK;AACH,gBAAI,QAAQ,MAAM,QAAQ,GAAG;AAE7B,gBAAI,CAAC,OAAO;AACV,kBAAI,WAAW,MAAM,MAAM,GAAG,KAAK;AACnC,kBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAElE,kBAAI,WAAW,MAAM,MAAM,QAAQ,CAAC;AACpC,kBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAAA,YACpE,OAAO;AACL,kBAAI,WAAW,mBAAmB,mBAAmB,KAAK,CAAC;AAAA,YAC7D;AAAA,QACJ;AAEA,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,cAAI,MAAM,MAAM,CAAC;AAEjB,cAAI,IAAI,CAAC,GAAG;AAAE,gBAAI,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,EAAE,YAAY;AAAA,UAAG;AAAA,QACzD;AAEA,YAAI,OAAO,IAAI,WAAW,IAAI,WAAU,MAAK,IAAI,WAAW,IAAI;AAEhE,YAAI,SAAS,IAAI,aAAa,WAAW,UAAU,IAAI,QAAQ,KAAK,IAAI,OACpE,IAAI,WAAU,OAAM,IAAI,OACxB;AAEJ,YAAI,OAAO,IAAI,SAAS;AAExB,eAAO;AAAA,MACT;AASA,eAAS,SAASC,YAAW;AAC3B,YAAI,CAACA,cAAa,eAAe,OAAOA,YAAW;AAAE,UAAAA,aAAY,iBAAiB;AAAA,QAAW;AAE7F,YAAI,OACA,MAAM,MACN,OAAO,IAAI,MACX,WAAW,IAAI;AAEnB,YAAI,YAAY,SAAS,OAAO,SAAS,SAAS,CAAC,MAAM,KAAK;AAAE,sBAAY;AAAA,QAAK;AAEjF,YAAI,SACF,YACE,IAAI,YAAY,IAAI,WAAY,UAAU,IAAI,QAAQ,IAAI,OAAO;AAErE,YAAI,IAAI,UAAU;AAChB,oBAAU,IAAI;AACd,cAAI,IAAI,UAAU;AAAE,sBAAU,MAAK,IAAI;AAAA,UAAU;AACjD,oBAAU;AAAA,QACZ,WAAW,IAAI,UAAU;AACvB,oBAAU,MAAK,IAAI;AACnB,oBAAU;AAAA,QACZ,WACE,IAAI,aAAa,WACjB,UAAU,IAAI,QAAQ,KACtB,CAAC,QACD,IAAI,aAAa,KACjB;AAKA,oBAAU;AAAA,QACZ;AAOA,YAAI,KAAK,KAAK,SAAS,CAAC,MAAM,KAAK;AAAE,kBAAQ;AAAA,QAAK;AAClD,kBAAU,OAAO,IAAI;AAErB,gBAAQ,aAAa,OAAO,IAAI,QAAQA,WAAU,IAAI,KAAK,IAAI,IAAI;AACnE,YAAI,OAAO;AAAE,oBAAU,QAAQ,MAAM,OAAO,CAAC,IAAI,MAAK,QAAQ;AAAA,QAAO;AAErE,YAAI,IAAI,MAAM;AAAE,oBAAU,IAAI;AAAA,QAAM;AAEpC,eAAO;AAAA,MACT;AAEA,UAAI,YAAY,EAAE,KAAU,SAAmB;AAM/C,UAAI,kBAAkB;AACtB,UAAI,WAAW;AACf,UAAI,WAAW;AACf,UAAI,KAAK;AAET,UAAI,WAAW;AAUf,eAAS,MAAM,UAAU,SAAS;AAChC,mBAAW,SAAU,gBAAgB;AAAE,iBAAO,SAAS,KAAK,cAAc;AAAA,QAAG,GAAG,GAAG,OAAO;AAAA,MAC5F;AAEA,eAAS,IAAI,QAAQ,SAAS;AAE5B,YAAI,OAAO,YAAY,eAAe,MAAiC;AACrE,kBAAQ,MAAM,EAAE,KAAK,MAAM,OAAO;AAAA,QACpC;AAAA,MAEF;AAEA,eAAS,OAAO,OAAO,UAAU;AAC/B,YAAK,UAAU;AAAS,kBAAQ,CAAC;AAEjC,YAAI,UAAU,CAAC;AACf,cAAM,QAAQ,SAAU,aAAa;AACnC,cAAI,CAAC,SAAS,WAAW,GAAG;AAC1B,oBAAQ,KAAK,WAAW;AAAA,UAC1B;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAEA,eAAS,OAAO,OAAO,UAAU;AAC/B,YAAK,UAAU;AAAS,kBAAQ,CAAC;AAEjC,YAAI,UAAU,CAAC;AACf,cAAM,QAAQ,SAAU,aAAa;AACnC,cAAI,SAAS,WAAW,GAAG;AACzB,oBAAQ,KAAK,WAAW;AAAA,UAC1B;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAQA,UAAI,cAAc,SAASC,eAAc;AACvC,aAAK,YAAY,CAAC;AAAA,MACpB;AAUA,kBAAY,UAAU,mBAAmB,SAAS,iBAAkB,MAAM,UAA6B;AACrG,YAAI,OAAO,aAAa,YAAY;AAClC,cAAI,CAAC,MAAM,QAAQ,KAAK,UAAU,IAAI,CAAC,GAAG;AACxC,iBAAK,UAAU,IAAI,IAAI,CAAC;AAAA,UAC1B;AAGA,cAAI,OAAO,KAAK,UAAU,IAAI,GAAG,SAAU,MAAM;AAAE,mBAAO,SAAS;AAAA,UAAU,CAAC,EAAE,WAAW,GAAG;AAC5F,iBAAK,UAAU,IAAI,EAAE,KAAK,QAAQ;AAAA,UACpC;AAAA,QACF;AAAA,MACF;AASA,kBAAY,UAAU,sBAAsB,SAAS,oBAAqB,MAAM,kBAAqC;AACnH,YAAI,mBAAmB,KAAK,UAAU,IAAI;AAC1C,aAAK,UAAU,IAAI,IAAI,OAAO,kBAAkB,SAAU,UAAU;AAAE,iBAAO,aAAa;AAAA,QAAkB,CAAC;AAAA,MAC/G;AAQA,kBAAY,UAAU,gBAAgB,SAAS,cAAe,OAAO;AACjE,YAAI,SAAS;AACb,YAAI,kBAAkB,CAAC,GAAG,MAAM,UAAU,SAAS;AACnD,eAAQ,QAAQ;AAAI,0BAAiB,GAAI,IAAI,UAAW,MAAM,CAAE;AAElE,YAAI,YAAY,MAAM;AACtB,YAAI,YAAY,KAAK,UAAU,SAAS;AAExC,YAAI,CAAC,MAAM,QAAQ,SAAS,GAAG;AAC7B,iBAAO;AAAA,QACT;AAEA,kBAAU,QAAQ,SAAU,UAAU;AACpC,cAAI,gBAAgB,SAAS,GAAG;AAC9B,qBAAS,MAAM,QAAQ,eAAe;AAAA,UACxC,OAAO;AACL,qBAAS,KAAK,QAAQ,KAAK;AAAA,UAC7B;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAEA,eAAS,qBAAqB,KAAK;AACjC,YAAI,aAAa,IAAI,QAAQ,GAAG;AAChC,eAAO,cAAc,IAAI,IAAI,MAAM,GAAG,UAAU,IAAI;AAAA,MACtD;AAOA,UAAI,gBAAgB,SAASC,iBAAgB;AAC3C,aAAK,SAAS,CAAC;AAAA,MACjB;AASA,oBAAc,UAAU,kBAAkB,SAAS,gBAAiB,WAAW,KAAK;AAClF,YAAI,YAAY,qBAAqB,GAAG;AACxC,YAAI,mBAAmB,KAAK,OAAO,SAAS;AAE5C,YAAI,oBAAoB,iBAAiB,UAAU,iBAAiB,WAAW,QAAQ,SAAS,MAAM,IAAI;AACxG,2BAAiB,WAAW,KAAK,SAAS;AAC1C,iBAAO,iBAAiB;AAAA,QAC1B;AAAA,MACF;AAKA,oBAAc,UAAU,sBAAsB,SAAS,oBAAqB,WAAW,MAAM;AAC3F,YAAI,mBAAmB,KAAK,OAAO,qBAAqB,UAAU,GAAG,CAAC;AAEtE,YAAI,oBAAoB,iBAAiB,UAAU,iBAAiB,WAAW,QAAQ,SAAS,MAAM,IAAI;AACxG,cAAI,CAAC,iBAAiB,gBAAgB,IAAI,GAAG;AAC3C,6BAAiB,gBAAgB,IAAI,IAAI,CAAC;AAAA,UAC5C;AAEA,2BAAiB,gBAAgB,IAAI,EAAE,KAAK,SAAS;AAAA,QACvD;AAAA,MACF;AASA,oBAAc,UAAU,eAAe,SAAS,aAAc,QAAQ,KAAK;AACzE,YAAI,YAAY,qBAAqB,GAAG;AACxC,YAAI,mBAAmB,KAAK,OAAO,SAAS;AAE5C,YAAI,CAAC,kBAAkB;AACrB,eAAK,OAAO,SAAS,IAAI;AAAA,YACvB;AAAA,YACA,YAAY,CAAC;AAAA,YACb,iBAAiB,CAAC;AAAA,UACpB;AAEA,iBAAO;AAAA,QACT;AAAA,MACF;AAOA,oBAAc,UAAU,eAAe,SAAS,aAAc,KAAK;AACjE,YAAI,YAAY,qBAAqB,GAAG;AACxC,YAAI,mBAAmB,KAAK,OAAO,SAAS;AAE5C,YAAI,kBAAkB;AACpB,iBAAO,iBAAiB;AAAA,QAC1B;AAAA,MACF;AASA,oBAAc,UAAU,mBAAmB,SAAS,iBAAkB,KAAK,MAAM,aAAa;AAC5F,YAAI,YAAY,qBAAqB,GAAG;AACxC,YAAI;AACJ,YAAI,mBAAmB,KAAK,OAAO,SAAS;AAE5C,qBAAa,mBAAmB,iBAAiB,aAAa,CAAC;AAE/D,YAAI,MAAM;AACR,cAAI,UAAU,iBAAiB,gBAAgB,IAAI;AACnD,uBAAa,WAAW,CAAC;AAAA,QAC3B;AAEA,eAAO,cAAc,WAAW,OAAO,SAAU,WAAW;AAAE,iBAAO,cAAc;AAAA,QAAa,CAAC,IAAI;AAAA,MACvG;AAOA,oBAAc,UAAU,eAAe,SAAS,aAAc,KAAK;AACjE,eAAO,KAAK,OAAO,qBAAqB,GAAG,CAAC;AAAA,MAC9C;AAQA,oBAAc,UAAU,kBAAkB,SAAS,gBAAiB,WAAW,KAAK;AAClF,YAAI,YAAY,qBAAqB,GAAG;AACxC,YAAI,mBAAmB,KAAK,OAAO,SAAS;AAE5C,YAAI,kBAAkB;AACpB,2BAAiB,aAAa,OAAO,iBAAiB,YAAY,SAAU,QAAQ;AAAE,mBAAO,WAAW;AAAA,UAAW,CAAC;AAAA,QACtH;AAAA,MACF;AAKA,oBAAc,UAAU,2BAA2B,SAAS,yBAA0B,WAAW,MAAM;AACrG,YAAI,mBAAmB,KAAK,OAAO,qBAAqB,UAAU,GAAG,CAAC;AACtE,YAAI,cAAc,iBAAiB,gBAAgB,IAAI;AAEvD,YAAI,oBAAoB,gBAAgB,MAAM;AAC5C,2BAAiB,gBAAgB,IAAI,IAAI,OAAO,aAAa,SAAU,QAAQ;AAAE,mBAAO,WAAW;AAAA,UAAW,CAAC;AAAA,QACjH;AAAA,MACF;AAEA,UAAI,gBAAgB,IAAI,cAAc;AAKtC,UAAI,cAAc;AAAA,QAChB,cAAc;AAAA,QACd,kBAAkB;AAAA,QAClB,sBAAsB;AAAA,QACtB,mBAAmB;AAAA,QACnB,iBAAiB;AAAA,QACjB,gBAAgB;AAAA,QAChB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,iBAAiB;AAAA,QACjB,mBAAmB;AAAA,QACnB,gBAAgB;AAAA,QAChB,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,QACjB,eAAe;AAAA,MACjB;AAEA,UAAI,eAAe;AAAA,QACjB,mBAAmB;AAAA,QACnB,aAAa;AAAA,QACb,OAAO;AAAA,UACL,WAAW;AAAA,UACX,SAAS;AAAA,UACT,OAAO;AAAA,QACT;AAAA,MACF;AAEA,UAAI,iBAAiB,SAASC,kBAAkB;AAAA,MAAC;AAEjD,qBAAe,UAAU,kBAAkB,SAAS,kBAAmB;AAAA,MAAC;AACxE,qBAAe,UAAU,2BAA2B,SAAS,2BAA4B;AAAA,MAAC;AAI1F,qBAAe,UAAU,YAAY,SAAS,UAAW,MAAM,SAAS,YAAY;AAChF,YAAK,SAAS;AAAS,iBAAO;AAC9B,YAAK,YAAY;AAAS,oBAAU;AACpC,YAAK,eAAe;AAAS,uBAAa;AAE5C,aAAK,OAAO,KAAK;AACjB,aAAK,UAAU,QAAQ,OAAO;AAC9B,aAAK,aAAa,QAAQ,UAAU;AAAA,MACtC;AAEA,UAAI,QAAS,SAAU,mBAAmB;AACxC,iBAASC,OAAM,MAAM,iBAAiB;AACpC,cAAK,oBAAoB;AAAS,8BAAkB,CAAC;AAErD,4BAAkB,KAAK,IAAI;AAE3B,cAAI,CAAC,MAAM;AACT,kBAAM,IAAI,UAAY,aAAa,cAAe,2CAA4C;AAAA,UAChG;AAEA,cAAI,OAAO,oBAAoB,UAAU;AACvC,kBAAM,IAAI,UAAY,aAAa,cAAe,kDAAmD;AAAA,UACvG;AAEA,cAAI,UAAU,gBAAgB;AAC9B,cAAI,aAAa,gBAAgB;AAEjC,eAAK,OAAO,KAAK;AACjB,eAAK,YAAY,KAAK,IAAI;AAC1B,eAAK,SAAS;AACd,eAAK,aAAa;AAClB,eAAK,cAAc;AACnB,eAAK,YAAY;AACjB,eAAK,aAAa;AAClB,eAAK,mBAAmB;AACxB,eAAK,gBAAgB;AACrB,eAAK,aAAa,aAAa,QAAQ,UAAU,IAAI;AACrD,eAAK,eAAe;AACpB,eAAK,UAAU,UAAU,QAAQ,OAAO,IAAI;AAAA,QAC9C;AAEA,YAAK;AAAoB,UAAAA,OAAM,YAAY;AAC3C,QAAAA,OAAM,YAAY,OAAO,OAAQ,qBAAqB,kBAAkB,SAAU;AAClF,QAAAA,OAAM,UAAU,cAAcA;AAE9B,eAAOA;AAAA,MACT,EAAE,cAAc;AAEhB,UAAI,eAAgB,SAAU,mBAAmB;AAC/C,iBAASC,cAAa,MAAM,iBAAiB;AAC3C,cAAK,oBAAoB;AAAS,8BAAkB,CAAC;AAErD,4BAAkB,KAAK,IAAI;AAE3B,cAAI,CAAC,MAAM;AACT,kBAAM,IAAI,UAAY,aAAa,MAAM,UAAW,2CAA4C;AAAA,UAClG;AAEA,cAAI,OAAO,oBAAoB,UAAU;AACvC,kBAAM,IAAI,UAAY,aAAa,MAAM,UAAW,iDAAkD;AAAA,UACxG;AAEA,cAAI,UAAU,gBAAgB;AAC9B,cAAI,aAAa,gBAAgB;AACjC,cAAI,OAAO,gBAAgB;AAC3B,cAAI,SAAS,gBAAgB;AAC7B,cAAI,cAAc,gBAAgB;AAClC,cAAI,QAAQ,gBAAgB;AAE5B,eAAK,OAAO,KAAK;AACjB,eAAK,YAAY,KAAK,IAAI;AAC1B,eAAK,SAAS;AACd,eAAK,aAAa;AAClB,eAAK,cAAc;AACnB,eAAK,YAAY;AACjB,eAAK,aAAa;AAClB,eAAK,mBAAmB;AACxB,eAAK,gBAAgB;AACrB,eAAK,aAAa,aAAa,QAAQ,UAAU,IAAI;AACrD,eAAK,gBAAgB;AACrB,eAAK,UAAU,UAAU,QAAQ,OAAO,IAAI;AAC5C,eAAK,SAAS,KAAK;AACnB,eAAK,QAAQ,OAAO,UAAU,cAAc,OAAO;AACnD,eAAK,OAAO,OAAO,SAAS,cAAc,OAAO;AACjD,eAAK,cAAc,MAAM,eAAe;AAAA,QAC1C;AAEA,YAAK;AAAoB,UAAAA,cAAa,YAAY;AAClD,QAAAA,cAAa,YAAY,OAAO,OAAQ,qBAAqB,kBAAkB,SAAU;AACzF,QAAAA,cAAa,UAAU,cAAcA;AAErC,eAAOA;AAAA,MACT,EAAE,cAAc;AAEhB,UAAI,aAAc,SAAU,mBAAmB;AAC7C,iBAASC,YAAW,MAAM,iBAAiB;AACzC,cAAK,oBAAoB;AAAS,8BAAkB,CAAC;AAErD,4BAAkB,KAAK,IAAI;AAE3B,cAAI,CAAC,MAAM;AACT,kBAAM,IAAI,UAAY,aAAa,MAAM,QAAS,2CAA4C;AAAA,UAChG;AAEA,cAAI,OAAO,oBAAoB,UAAU;AACvC,kBAAM,IAAI,UAAY,aAAa,MAAM,QAAS,iDAAkD;AAAA,UACtG;AAEA,cAAI,UAAU,gBAAgB;AAC9B,cAAI,aAAa,gBAAgB;AACjC,cAAI,OAAO,gBAAgB;AAC3B,cAAI,SAAS,gBAAgB;AAC7B,cAAI,WAAW,gBAAgB;AAE/B,eAAK,OAAO,KAAK;AACjB,eAAK,YAAY,KAAK,IAAI;AAC1B,eAAK,SAAS;AACd,eAAK,aAAa;AAClB,eAAK,cAAc;AACnB,eAAK,YAAY;AACjB,eAAK,aAAa;AAClB,eAAK,mBAAmB;AACxB,eAAK,gBAAgB;AACrB,eAAK,aAAa,aAAa,QAAQ,UAAU,IAAI;AACrD,eAAK,eAAe;AACpB,eAAK,UAAU,UAAU,QAAQ,OAAO,IAAI;AAC5C,eAAK,OAAO,OAAO,SAAS,WAAW,SAAS,MAAM,EAAE,IAAI;AAC5D,eAAK,SAAS,MAAM,UAAU;AAC9B,eAAK,WAAW,WAAW,QAAQ,QAAQ,IAAI;AAAA,QACjD;AAEA,YAAK;AAAoB,UAAAA,YAAW,YAAY;AAChD,QAAAA,YAAW,YAAY,OAAO,OAAQ,qBAAqB,kBAAkB,SAAU;AACvF,QAAAA,YAAW,UAAU,cAAcA;AAEnC,eAAOA;AAAA,MACT,EAAE,cAAc;AAQhB,eAAS,YAAY,QAAQ;AAC3B,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,OAAO;AACpB,YAAI,cAAc,IAAI,MAAM,IAAI;AAEhC,YAAI,QAAQ;AACV,sBAAY,SAAS;AACrB,sBAAY,aAAa;AACzB,sBAAY,gBAAgB;AAAA,QAC9B;AAEA,eAAO;AAAA,MACT;AAQA,eAAS,mBAAmB,QAAQ;AAClC,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,OAAO;AACpB,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,OAAO;AACpB,YAAI,eAAe,IAAI,aAAa,MAAM;AAAA,UACxC;AAAA,UACA;AAAA,QACF,CAAC;AAED,YAAI,QAAQ;AACV,uBAAa,SAAS;AACtB,uBAAa,aAAa;AAC1B,uBAAa,gBAAgB;AAAA,QAC/B;AAEA,eAAO;AAAA,MACT;AAQA,eAAS,iBAAiB,QAAQ;AAChC,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,OAAO;AACpB,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,OAAO;AACpB,YAAI,WAAW,OAAO;AAEtB,YAAI,CAAC,UAAU;AACb,qBAAW,SAAS,YAAY,gBAAgB,SAAS,YAAY;AAAA,QACvE;AAEA,YAAI,aAAa,IAAI,WAAW,MAAM;AAAA,UACpC;AAAA,UACA;AAAA,UACA;AAAA,QACF,CAAC;AAED,YAAI,QAAQ;AACV,qBAAW,SAAS;AACpB,qBAAW,aAAa;AACxB,qBAAW,gBAAgB;AAAA,QAC7B;AAEA,eAAO;AAAA,MACT;AAEA,eAAS,yBAAyB,SAAS,MAAM,QAAQ;AACvD,gBAAQ,aAAa,YAAY;AAEjC,YAAI,SAAS,cAAc,aAAa,QAAQ,GAAG;AACnD,YAAI,aAAa,iBAAiB;AAAA,UAChC,MAAM;AAAA,UACN,QAAQ,QAAQ;AAAA,UAChB;AAAA,UACA;AAAA,QACF,CAAC;AAED,cAAM,WAAY;AAChB,wBAAc,gBAAgB,SAAS,QAAQ,GAAG;AAElD,kBAAQ,aAAa,YAAY;AACjC,kBAAQ,cAAc,UAAU;AAEhC,cAAI,QAAQ;AACV,mBAAO,cAAc,YAAY,MAAM;AAAA,UACzC;AAAA,QACF,GAAG,OAAO;AAAA,MACZ;AAEA,eAAS,wBAAwB,SAAS,MAAM,QAAQ;AACtD,gBAAQ,aAAa,YAAY;AAEjC,YAAI,SAAS,cAAc,aAAa,QAAQ,GAAG;AACnD,YAAI,aAAa,iBAAiB;AAAA,UAChC,MAAM;AAAA,UACN,QAAQ,QAAQ;AAAA,UAChB;AAAA,UACA;AAAA,UACA,UAAU;AAAA,QACZ,CAAC;AAED,YAAI,aAAa,YAAY;AAAA,UAC3B,MAAM;AAAA,UACN,QAAQ,QAAQ;AAAA,QAClB,CAAC;AAED,cAAM,WAAY;AAChB,wBAAc,gBAAgB,SAAS,QAAQ,GAAG;AAElD,kBAAQ,aAAa,YAAY;AACjC,kBAAQ,cAAc,UAAU;AAChC,kBAAQ,cAAc,UAAU;AAEhC,cAAI,QAAQ;AACV,mBAAO,cAAc,YAAY,MAAM;AAAA,UACzC;AAAA,QACF,GAAG,OAAO;AAAA,MACZ;AAEA,eAAS,kBAAkB,MAAM;AAC/B,YAAI,OAAO,UAAU,SAAS,KAAK,IAAI,MAAM,mBAAmB,EAAE,gBAAgB,cAAc;AAC9F,iBAAO,OAAO,IAAI;AAAA,QACpB;AAEA,eAAO;AAAA,MACT;AAEA,UAAI,UAAU,oBAAI,QAAQ;AAE1B,eAAS,aAAa,QAAQ;AAC5B,YAAI,QAAQ,IAAI,MAAM,GAAG;AACvB,iBAAO,QAAQ,IAAI,MAAM;AAAA,QAC3B;AAEA,YAAI,QAAQ,IAAI,MAAM,QAAQ;AAAA,UAC5B,KAAK,SAAS,IAAI,KAAK,MAAM;AAC3B,gBAAI,SAAS,SAAS;AACpB,qBAAO,SAAS,MAAM,SAAS;AAC7B,oBAAK,YAAY;AAAS,4BAAU,CAAC;AAErC,oBAAI,OAAO,QAAQ,QAAQ,YAAY;AACvC,oBAAI,SAAS,QAAQ,UAAU;AAE/B,yCAAyB,OAAO,MAAM,MAAM;AAAA,cAC9C;AAAA,YACF;AAEA,gBAAI,SAAS,QAAQ;AACnB,qBAAO,SAAS,KAAK,MAAM;AACzB,uBAAO,kBAAkB,IAAI;AAE7B,uBAAO;AAAA,kBACL,mBAAmB;AAAA,oBACjB,MAAM;AAAA,oBACN;AAAA,oBACA,QAAQ,KAAK;AAAA,oBACb;AAAA,kBACF,CAAC;AAAA,gBACH;AAAA,cACF;AAAA,YACF;AAEA,gBAAI,eAAe,SAAU,MAAM;AAAE,qBAAQ,SAAS,YAAa,aAAa,OAAQ;AAAA,YAAO;AAC/F,gBAAI,SAAS,MAAM;AACjB,qBAAO,SAAS,UAAU,MAAM,IAAI;AAClC,uBAAO,iBAAiB,aAAa,IAAI,GAAG,EAAE;AAAA,cAChD;AAAA,YACF;AACA,gBAAI,SAAS,OAAO;AAClB,qBAAO,SAAS,WAAW,MAAM,IAAI;AACnC,uBAAO,oBAAoB,aAAa,IAAI,GAAG,EAAE;AAAA,cACnD;AAAA,YACF;AAEA,gBAAI,SAAS,UAAU;AACrB,qBAAO;AAAA,YACT;AAEA,mBAAO,IAAI,IAAI;AAAA,UACjB;AAAA,QACF,CAAC;AACD,gBAAQ,IAAI,QAAQ,KAAK;AAEzB,eAAO;AAAA,MACT;AAEA,eAAS,kBAAkB,KAAK;AAE9B,YAAI,IAAI,mBAAmB,GAAG,EAAE,MAAM,YAAY;AAClD,eAAO,IAAI,UAAU,IAAI,EAAE,SAAS;AAAA,MACtC;AAEA,eAAS,gBAAgB,KAAK;AAC5B,YAAI,YAAY,IAAI,SAAS,GAAG;AAChC,YAAI,WAAW,UAAU;AACzB,YAAI,WAAW,UAAU;AACzB,YAAI,OAAO,UAAU;AAErB,YAAI,CAAC,KAAK;AACR,gBAAM,IAAI,UAAY,aAAa,oBAAqB,2CAA4C;AAAA,QACtG;AAEA,YAAI,CAAC,UAAU;AACb,oBAAU,WAAW;AAAA,QACvB;AAEA,YAAI,aAAa,IAAI;AACnB,gBAAM,IAAI,YAAc,aAAa,oBAAqB,eAAgB,UAAU,SAAS,IAAK,eAAgB;AAAA,QACpH;AAEA,YAAI,aAAa,SAAS,aAAa,QAAQ;AAC7C,gBAAM,IAAI;AAAA,YACN,aAAa,oBAAqB,sDAAsD,WAAW;AAAA,UACvG;AAAA,QACF;AAEA,YAAI,SAAS,IAAI;AAEf,gBAAM,IAAI;AAAA,YACN,aAAa,oBAAqB,+CAA+C,OAAO;AAAA,UAC5F;AAAA,QAEF;AAEA,eAAO,UAAU,SAAS;AAAA,MAC5B;AAEA,eAAS,qBAAqB,WAAW;AACvC,YAAK,cAAc;AAAS,sBAAY,CAAC;AAEzC,YAAI,CAAC,MAAM,QAAQ,SAAS,KAAK,OAAO,cAAc,UAAU;AAC9D,gBAAM,IAAI,YAAc,aAAa,oBAAqB,uBAAwB,UAAU,SAAS,IAAK,eAAgB;AAAA,QAC5H;AAEA,YAAI,OAAO,cAAc,UAAU;AACjC,sBAAY,CAAC,SAAS;AAAA,QACxB;AAEA,YAAI,OAAO,UACR,IAAI,SAAU,GAAG;AAAE,iBAAQ,EAAE,OAAO,GAAG,UAAU,EAAE;AAAA,QAAI,CAAC,EACxD,OAAO,SAAU,GAAG,GAAG;AACtB,YAAE,EAAE,QAAQ,KAAK,EAAE,EAAE,QAAQ,KAAK,KAAK,EAAE;AACzC,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAEP,YAAI,aAAa,OAAO,KAAK,IAAI,EAAE,OAAO,SAAU,GAAG;AAAE,iBAAO,KAAK,CAAC,IAAI;AAAA,QAAG,CAAC;AAE9E,YAAI,WAAW,SAAS,GAAG;AACzB,gBAAM,IAAI,YAAc,aAAa,oBAAqB,uBAAwB,WAAW,CAAC,IAAK,kBAAmB;AAAA,QACxH;AAEA,eAAO;AAAA,MACT;AAQA,UAAI,cAAe,SAAU,gBAAgB;AAC3C,iBAASC,WAAU,KAAK,WAAW;AACjC,yBAAe,KAAK,IAAI;AAExB,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,WAAW;AAChB,eAAK,WAAW;AAEhB,eAAK,MAAM,gBAAgB,GAAG;AAC9B,sBAAY,qBAAqB,SAAS;AAC1C,eAAK,WAAW,UAAU,CAAC,KAAK;AAEhC,eAAK,aAAa;AAClB,eAAK,aAAaA,WAAU;AAE5B,cAAI,SAAS,aAAa,IAAI;AAC9B,cAAI,SAAS,cAAc,gBAAgB,QAAQ,KAAK,GAAG;AAgB3D,gBAAM,SAAS,gBAAgB;AAC7B,gBAAI,KAAK,eAAeA,WAAU,YAAY;AAC5C;AAAA,YACF;AACA,gBAAI,QAAQ;AACV,kBACE,OAAO,QAAQ,gBACf,OAAO,OAAO,QAAQ,iBAAiB,cACvC,CAAC,OAAO,QAAQ,aAAa,GAC7B;AACA,qBAAK,aAAaA,WAAU;AAE5B;AAAA,kBACE;AAAA,kBACC,8BAA+B,KAAK,MAAO;AAAA,gBAC9C;AAEA,8BAAc,gBAAgB,QAAQ,KAAK,GAAG;AAC9C,qBAAK,cAAc,YAAY,EAAE,MAAM,SAAS,QAAQ,KAAK,CAAC,CAAC;AAC/D,qBAAK,cAAc,iBAAiB,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,YAAY,aAAa,CAAC,CAAC;AAAA,cACtG,OAAO;AACL,oBAAI,OAAO,QAAQ,kBAAkB,OAAO,OAAO,QAAQ,mBAAmB,YAAY;AACxF,sBAAI,mBAAmB,OAAO,QAAQ,eAAe,SAAS;AAC9D,sBAAI,WAAW,qBAAqB;AACpC,sBAAI,cAAc,UAAU,QAAQ,gBAAgB,MAAM;AAC1D,sBAAI,YAAY,CAAC,aAAa;AAC5B,yBAAK,aAAaA,WAAU;AAE5B,wBAAI,SAAU,8BAA+B,KAAK,MAAO,gCAAiC;AAE1F,kCAAc,gBAAgB,QAAQ,KAAK,GAAG;AAC9C,yBAAK,cAAc,YAAY,EAAE,MAAM,SAAS,QAAQ,KAAK,CAAC,CAAC;AAC/D,yBAAK,cAAc,iBAAiB,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,YAAY,aAAa,CAAC,CAAC;AACpG;AAAA,kBACF;AACA,uBAAK,WAAW;AAAA,gBAClB;AACA,qBAAK,aAAaA,WAAU;AAC5B,qBAAK,cAAc,YAAY,EAAE,MAAM,QAAQ,QAAQ,KAAK,CAAC,CAAC;AAC9D,uBAAO,cAAc,YAAY,EAAE,MAAM,aAAa,CAAC,GAAG,MAAM;AAAA,cAClE;AAAA,YACF,OAAO;AACL,mBAAK,aAAaA,WAAU;AAC5B,mBAAK,cAAc,YAAY,EAAE,MAAM,SAAS,QAAQ,KAAK,CAAC,CAAC;AAC/D,mBAAK,cAAc,iBAAiB,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,YAAY,aAAa,CAAC,CAAC;AAEpG,kBAAI,SAAU,8BAA+B,KAAK,MAAO,UAAW;AAAA,YACtE;AAAA,UACF,GAAG,IAAI;AAAA,QACT;AAEA,YAAK;AAAiB,UAAAA,WAAU,YAAY;AAC5C,QAAAA,WAAU,YAAY,OAAO,OAAQ,kBAAkB,eAAe,SAAU;AAChF,QAAAA,WAAU,UAAU,cAAcA;AAElC,YAAI,qBAAqB,EAAE,QAAQ,CAAC,GAAE,WAAW,CAAC,GAAE,SAAS,CAAC,GAAE,SAAS,CAAC,EAAE;AAE5E,2BAAmB,OAAO,MAAM,WAAY;AAC1C,iBAAO,KAAK;AAAA,QACd;AAEA,2BAAmB,UAAU,MAAM,WAAY;AAC7C,iBAAO,KAAK;AAAA,QACd;AAEA,2BAAmB,QAAQ,MAAM,WAAY;AAC3C,iBAAO,KAAK;AAAA,QACd;AAEA,2BAAmB,QAAQ,MAAM,WAAY;AAC3C,iBAAO,KAAK;AAAA,QACd;AAEA,2BAAmB,OAAO,MAAM,SAAU,UAAU;AAClD,eAAK,oBAAoB,QAAQ,KAAK,OAAO;AAC7C,eAAK,UAAU;AACf,eAAK,iBAAiB,QAAQ,QAAQ;AAAA,QACxC;AAEA,2BAAmB,UAAU,MAAM,SAAU,UAAU;AACrD,eAAK,oBAAoB,WAAW,KAAK,UAAU;AACnD,eAAK,aAAa;AAClB,eAAK,iBAAiB,WAAW,QAAQ;AAAA,QAC3C;AAEA,2BAAmB,QAAQ,MAAM,SAAU,UAAU;AACnD,eAAK,oBAAoB,SAAS,KAAK,QAAQ;AAC/C,eAAK,WAAW;AAChB,eAAK,iBAAiB,SAAS,QAAQ;AAAA,QACzC;AAEA,2BAAmB,QAAQ,MAAM,SAAU,UAAU;AACnD,eAAK,oBAAoB,SAAS,KAAK,QAAQ;AAC/C,eAAK,WAAW;AAChB,eAAK,iBAAiB,SAAS,QAAQ;AAAA,QACzC;AAEA,QAAAA,WAAU,UAAU,OAAO,SAAS,KAAM,MAAM;AAC9C,cAAI,SAAS;AAEb,cAAI,KAAK,eAAeA,WAAU,YAAY;AAE5C,kBAAM,IAAI,MAAM,oEAAoE;AAAA,UACtF;AAIA,cAAI,eAAe,mBAAmB;AAAA,YACpC,MAAM;AAAA,YACN,QAAQ,KAAK;AAAA,YACb,MAAM,kBAAkB,IAAI;AAAA,UAC9B,CAAC;AAED,cAAI,SAAS,cAAc,aAAa,KAAK,GAAG;AAEhD,cAAI,QAAQ;AACV,kBAAM,WAAY;AAChB,qBAAO,cAAc,cAAc,IAAI;AAAA,YACzC,GAAG,MAAM;AAAA,UACX;AAAA,QACF;AAEA,QAAAA,WAAU,UAAU,QAAQ,SAAS,MAAO,MAAM,QAAQ;AACxD,cAAI,SAAS,QAAW;AACtB,gBAAI,OAAO,SAAS,YAAa,SAAS,QAAS,OAAO,OAAQ,OAAO,OAAQ;AAC/E,oBAAM,IAAI;AAAA,gBACN,aAAa,cAAe,8DAA8D,OAAO;AAAA,cACrG;AAAA,YACF;AAAA,UACF;AAEA,cAAI,WAAW,QAAW;AACxB,gBAAI,SAAS,kBAAkB,MAAM;AAErC,gBAAI,SAAS,KAAK;AAChB,oBAAM,IAAI,YAAc,aAAa,cAAe,kDAAmD;AAAA,YACzG;AAAA,UACF;AAEA,cAAI,KAAK,eAAeA,WAAU,WAAW,KAAK,eAAeA,WAAU,QAAQ;AACjF;AAAA,UACF;AAEA,cAAI,SAAS,aAAa,IAAI;AAC9B,cAAI,KAAK,eAAeA,WAAU,YAAY;AAC5C,oCAAwB,QAAQ,QAAQ,YAAY,gBAAgB,MAAM;AAAA,UAC5E,OAAO;AACL,qCAAyB,QAAQ,QAAQ,YAAY,iBAAiB,MAAM;AAAA,UAC9E;AAAA,QACF;AAEA,eAAO,iBAAkBA,WAAU,WAAW,kBAAmB;AAEjE,eAAOA;AAAA,MACT,EAAE,WAAW;AAEb,kBAAY,aAAa;AACzB,kBAAY,UAAU,aAAa,YAAY;AAC/C,kBAAY,OAAO;AACnB,kBAAY,UAAU,OAAO,YAAY;AACzC,kBAAY,UAAU;AACtB,kBAAY,UAAU,UAAU,YAAY;AAC5C,kBAAY,SAAS;AACrB,kBAAY,UAAU,SAAS,YAAY;AAO3C,UAAI,aAAc,SAAU,gBAAgB;AAC1C,iBAAS,SAAS,KAAK,UAAU;AAC/B,cAAI,SAAS;AACb,cAAK,QAAQ;AAAS,kBAAM;AAC5B,cAAK,aAAa;AAAS,uBAAW;AAEtC,yBAAe,KAAK,IAAI;AAExB,eAAK,aAAa;AAClB,cAAI,YAAY,IAAI,SAAS,GAAG;AAEhC,cAAI,CAAC,UAAU,UAAU;AACvB,sBAAU,WAAW;AAAA,UACvB;AAEA,eAAK,MAAM,UAAU,SAAS;AAC9B,eAAK,aAAa,SAAS;AAC3B,eAAK,WAAW;AAChB,eAAK,SAAS;AAEd,cAAI,OAAO,aAAa,YAAa,OAAO,aAAa,YAAY,aAAa,MAAO;AACvF,iBAAK,WAAW;AAAA,UAClB,WAAW,MAAM,QAAQ,QAAQ,KAAK,SAAS,SAAS,GAAG;AACzD,iBAAK,WAAW,SAAS,CAAC;AAAA,UAC5B;AAEA,cAAI,SAAS,cAAc,gBAAgB,MAAM,KAAK,GAAG;AAKzD,gBAAM,SAAS,gBAAgB;AAC7B,gBAAI,QAAQ;AACV,mBAAK,aAAa,SAAS;AAC3B,qBAAO,cAAc,YAAY,EAAE,MAAM,aAAa,CAAC,GAAG,QAAQ,IAAI;AACtE,qBAAO,cAAc,YAAY,EAAE,MAAM,UAAU,CAAC,GAAG,QAAQ,IAAI;AACnE,mBAAK,cAAc,YAAY,EAAE,MAAM,WAAW,QAAQ,KAAK,CAAC,CAAC;AAAA,YACnE,OAAO;AACL,mBAAK,aAAa,SAAS;AAC3B,mBAAK,cAAc,YAAY,EAAE,MAAM,SAAS,QAAQ,KAAK,CAAC,CAAC;AAC/D,mBAAK;AAAA,gBACH,iBAAiB;AAAA,kBACf,MAAM;AAAA,kBACN,QAAQ;AAAA,kBACR,MAAM,YAAY;AAAA,gBACpB,CAAC;AAAA,cACH;AAEA,kBAAI,SAAU,8BAA+B,KAAK,MAAO,UAAW;AAAA,YACtE;AAAA,UACF,GAAG,IAAI;AAKP,eAAK,iBAAiB,SAAS,SAAU,OAAO;AAC9C,mBAAO;AAAA,cACL,iBAAiB;AAAA,gBACf,MAAM;AAAA,gBACN,QAAQ,MAAM;AAAA,gBACd,MAAM,MAAM;AAAA,cACd,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,QACH;AAEA,YAAK;AAAiB,mBAAS,YAAY;AAC3C,iBAAS,YAAY,OAAO,OAAQ,kBAAkB,eAAe,SAAU;AAC/E,iBAAS,UAAU,cAAc;AAEjC,YAAI,qBAAqB,EAAE,WAAW,CAAC,EAAE;AAMzC,iBAAS,UAAU,QAAQ,SAAS,QAAS;AAC3C,cAAI,KAAK,eAAe,SAAS,MAAM;AACrC,mBAAO;AAAA,UACT;AAEA,cAAI,SAAS,cAAc,aAAa,KAAK,GAAG;AAChD,wBAAc,gBAAgB,MAAM,KAAK,GAAG;AAE5C,eAAK,aAAa,SAAS;AAC3B,eAAK;AAAA,YACH,iBAAiB;AAAA,cACf,MAAM;AAAA,cACN,QAAQ;AAAA,cACR,MAAM,YAAY;AAAA,YACpB,CAAC;AAAA,UACH;AAEA,cAAI,QAAQ;AACV,mBAAO;AAAA,cACL,iBAAiB;AAAA,gBACf,MAAM;AAAA,gBACN,QAAQ;AAAA,gBACR,MAAM,YAAY;AAAA,cACpB,CAAC;AAAA,cACD;AAAA,YACF;AAAA,UACF;AAEA,iBAAO;AAAA,QACT;AAOA,iBAAS,UAAU,aAAa,SAAS,aAAc;AACrD,iBAAO,KAAK,MAAM;AAAA,QACpB;AAKA,iBAAS,UAAU,OAAO,SAAS,KAAM,OAAO;AAC9C,cAAI,OAAO,CAAC,GAAG,MAAM,UAAU,SAAS;AACxC,iBAAQ,QAAQ;AAAI,iBAAM,GAAI,IAAI,UAAW,MAAM,CAAE;AAErD,cAAI,KAAK,eAAe,SAAS,MAAM;AACrC,kBAAM,IAAI,MAAM,gDAAgD;AAAA,UAClE;AAEA,cAAI,eAAe,mBAAmB;AAAA,YACpC,MAAM;AAAA,YACN,QAAQ,KAAK;AAAA,YACb;AAAA,UACF,CAAC;AAED,cAAI,SAAS,cAAc,aAAa,KAAK,GAAG;AAEhD,cAAI,QAAQ;AACV,mBAAO,cAAc,MAAM,QAAQ,CAAE,YAAa,EAAE,OAAQ,IAAK,CAAC;AAAA,UACpE;AAEA,iBAAO;AAAA,QACT;AASA,iBAAS,UAAU,OAAO,SAAS,KAAM,MAAM;AAC7C,eAAK,KAAK,WAAW,IAAI;AACzB,iBAAO;AAAA,QACT;AAQA,2BAAmB,UAAU,MAAM,WAAY;AAC7C,cAAI,KAAK,eAAe,SAAS,MAAM;AACrC,kBAAM,IAAI,MAAM,gDAAgD;AAAA,UAClE;AAEA,cAAIC,QAAO;AACX,cAAI,SAAS,cAAc,aAAa,KAAK,GAAG;AAChD,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,MAAO,0DAA2D,KAAK,MAAO,GAAI;AAAA,UAC9F;AAEA,iBAAO;AAAA,YACL,MAAM,SAAS,KAAK,OAAO,MAAM;AAC/B,qBAAO,KAAK,OAAO,MAAM,EAAE,YAAY,cAAc,iBAAiBA,MAAK,KAAK,MAAMA,KAAI,EAAE,CAAC;AAC7F,qBAAOA;AAAA,YACT;AAAA,YACA,IAAI,SAAS,GAAG,MAAM;AACpB,qBAAO,OAAO,GAAG,MAAMA,KAAI;AAAA,YAC7B;AAAA,YACA,IAAI,SAAS,KAAK,MAAM;AACtB,qBAAO,OAAO,GAAG,MAAMA,KAAI;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAKA,iBAAS,UAAU,KAAK,SAAS,GAAI,MAAM,UAAU;AACnD,eAAK,iBAAiB,MAAM,QAAQ;AACpC,iBAAO;AAAA,QACT;AAOA,iBAAS,UAAU,MAAM,SAAS,IAAK,MAAM,UAAU;AACrD,eAAK,oBAAoB,MAAM,QAAQ;AAAA,QACzC;AAOA,iBAAS,UAAU,eAAe,SAAS,aAAc,MAAM;AAC7D,cAAI,YAAY,KAAK,UAAU,IAAI;AACnC,cAAI,CAAC,MAAM,QAAQ,SAAS,GAAG;AAC7B,mBAAO;AAAA,UACT;AACA,iBAAO,CAAC,CAAC,UAAU;AAAA,QACrB;AAOA,iBAAS,UAAU,OAAO,SAAS,KAAM,MAAM;AAC7C,wBAAc,oBAAoB,MAAM,IAAI;AAAA,QAC9C;AAOA,iBAAS,UAAU,QAAQ,SAAS,MAAO,MAAM;AAC/C,wBAAc,yBAAyB,MAAM,IAAI;AAAA,QACnD;AAEA,iBAAS,UAAU,KAAK,SAAS,GAAI,MAAM;AACzC,iBAAO,KAAK,UAAU,GAAG,IAAI;AAAA,QAC/B;AAEA,iBAAS,UAAU,KAAK,SAAS,OAAQ;AACvC,iBAAO,KAAK,GAAG,MAAM,MAAM,SAAS;AAAA,QACtC;AAQA,iBAAS,UAAU,gBAAgB,SAAS,cAAe,OAAO;AAChE,cAAI,SAAS;AACb,cAAI,kBAAkB,CAAC,GAAG,MAAM,UAAU,SAAS;AACnD,iBAAQ,QAAQ;AAAI,4BAAiB,GAAI,IAAI,UAAW,MAAM,CAAE;AAEhE,cAAI,YAAY,MAAM;AACtB,cAAI,YAAY,KAAK,UAAU,SAAS;AAExC,cAAI,CAAC,MAAM,QAAQ,SAAS,GAAG;AAC7B,mBAAO;AAAA,UACT;AAEA,oBAAU,QAAQ,SAAU,UAAU;AACpC,gBAAI,gBAAgB,SAAS,GAAG;AAC9B,uBAAS,MAAM,QAAQ,eAAe;AAAA,YACxC,OAAO;AAIL,uBAAS,KAAK,QAAQ,MAAM,OAAO,MAAM,OAAO,KAAK;AAAA,YACvD;AAAA,UACF,CAAC;AAAA,QACH;AAEA,eAAO,iBAAkB,SAAS,WAAW,kBAAmB;AAEhE,eAAO;AAAA,MACT,EAAE,WAAW;AAEb,iBAAW,aAAa;AACxB,iBAAW,OAAO;AAClB,iBAAW,UAAU;AACrB,iBAAW,SAAS;AAKpB,UAAI,KAAK,SAAS,cAAc,KAAK,UAAU;AAC7C,eAAO,IAAI,WAAW,KAAK,QAAQ;AAAA,MACrC;AAKA,SAAG,UAAU,SAAS,UAAU,KAAK,UAAU;AAE7C,eAAO,GAAG,KAAK,QAAQ;AAAA,MAEzB;AAEA,UAAI,SAAS,SAAU,KAAK;AAAE,eAAO,IAAI,OAAO,SAAU,SAAS,GAAG;AAClE,cAAI,QAAQ,QAAQ,CAAC,IAAI,IAAI;AAAE,mBAAO;AAAA,UAAS;AAC/C,iBAAO,QAAQ,OAAO,CAAC;AAAA,QACzB,GAAG,CAAC,CAAC;AAAA,MAAG;AAEV,eAAS,uBAAuB;AAC9B,YAAI,OAAO,WAAW,aAAa;AACjC,iBAAO;AAAA,QACT;AAEA,eAAO,OAAO,YAAY,YAAY,OAAO,cAAY,cAAc,OAAO,WAAW,WAAW,SAAS;AAAA,MAC/G;AAEA,UAAI,iBAAiB;AAAA,QACnB,MAAM;AAAA,QACN,cAAc;AAAA,QACd,gBAAgB;AAAA,MAClB;AAEA,UAAI,WAAY,SAAU,gBAAgB;AACxC,iBAASC,QAAO,KAAK,SAAS;AAC5B,cAAK,YAAY;AAAS,sBAAU;AAEpC,yBAAe,KAAK,IAAI;AACxB,cAAI,YAAY,IAAI,SAAS,GAAG;AAEhC,cAAI,CAAC,UAAU,UAAU;AACvB,sBAAU,WAAW;AAAA,UACvB;AAEA,eAAK,MAAM,UAAU,SAAS;AAE9B,eAAK,oBAAoB;AACzB,cAAI,SAAS,cAAc,aAAa,MAAM,KAAK,GAAG;AAEtD,cAAI,CAAC,QAAQ;AACX,iBAAK,cAAc,YAAY,EAAE,MAAM,QAAQ,CAAC,CAAC;AACjD,kBAAM,IAAI,MAAM,gDAAgD;AAAA,UAClE;AAEA,eAAK,UAAU,OAAO,OAAO,CAAC,GAAG,gBAAgB,OAAO;AAExD,cAAI,KAAK,QAAQ,MAAM;AACrB,iBAAK,cAAc;AAAA,UACrB;AAAA,QACF;AAEA,YAAK;AAAiB,UAAAA,QAAO,YAAY;AACzC,QAAAA,QAAO,YAAY,OAAO,OAAQ,kBAAkB,eAAe,SAAU;AAC7E,QAAAA,QAAO,UAAU,cAAcA;AAK/B,QAAAA,QAAO,UAAU,gBAAgB,SAAS,gBAAiB;AACzD,cAAI,YAAY,qBAAqB;AAErC,eAAK,oBAAoB,UAAU;AACnC,oBAAU,YAAY;AAAA,QACxB;AAKA,QAAAA,QAAO,UAAU,mBAAmB,SAAS,mBAAoB;AAC/D,cAAI,YAAY,qBAAqB;AAErC,cAAI,KAAK,sBAAsB,MAAM;AACnC,sBAAU,YAAY,KAAK;AAAA,UAC7B;AAEA,eAAK,oBAAoB;AAAA,QAC3B;AAMA,QAAAA,QAAO,UAAU,OAAO,SAAS,KAAM,UAAU;AAC/C,cAAK,aAAa;AAAS,uBAAW,WAAY;AAAA,YAAC;AAEnD,cAAI,KAAK,QAAQ,MAAM;AACrB,iBAAK,iBAAiB;AAAA,UACxB;AAEA,wBAAc,aAAa,KAAK,GAAG;AAEnC,cAAI,OAAO,aAAa,YAAY;AAClC,qBAAS;AAAA,UACX;AAAA,QACF;AAUA,QAAAA,QAAO,UAAU,KAAK,SAAS,GAAI,MAAM,UAAU;AACjD,eAAK,iBAAiB,MAAM,QAAQ;AAAA,QACtC;AAKA,QAAAA,QAAO,UAAU,MAAM,SAAS,IAAK,MAAM,UAAU;AACnD,eAAK,oBAAoB,MAAM,QAAQ;AAAA,QACzC;AASA,QAAAA,QAAO,UAAU,QAAQ,SAAS,MAAO,SAAS;AAChD,cAAK,YAAY;AAAS,sBAAU,CAAC;AAErC,cAAI,OAAO,QAAQ;AACnB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,QAAQ;AACvB,cAAI,YAAY,cAAc,iBAAiB,KAAK,GAAG;AAIvD,wBAAc,aAAa,KAAK,GAAG;AAEnC,oBAAU,QAAQ,SAAU,QAAQ;AAClC,mBAAO,aAAa,YAAY;AAChC,mBAAO;AAAA,cACL,iBAAiB;AAAA,gBACf,MAAM;AAAA,gBACN,QAAQ,OAAO;AAAA,gBACf,MAAM,QAAQ,YAAY;AAAA,gBAC1B,QAAQ,UAAU;AAAA,gBAClB;AAAA,cACF,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAED,eAAK,cAAc,iBAAiB,EAAE,MAAM,QAAQ,CAAC,GAAG,IAAI;AAAA,QAC9D;AAKA,QAAAA,QAAO,UAAU,OAAO,SAAS,KAAM,OAAO,MAAM,SAAS;AAC3D,cAAI,SAAS;AACb,cAAK,YAAY;AAAS,sBAAU,CAAC;AAErC,cAAI,aAAa,QAAQ;AAEzB,cAAI,CAAC,YAAY;AACf,yBAAa,cAAc,iBAAiB,KAAK,GAAG;AAAA,UACtD;AAEA,cAAI;AACJ,cAAI,OAAO,YAAY,YAAY,UAAU,SAAS,GAAG;AACvD,mBAAO,MAAM,UAAU,MAAM,KAAK,WAAW,GAAG,UAAU,MAAM;AAChE,6BAAiB,KAAK,IAAI,SAAU,MAAM;AAAE,qBAAO,kBAAkB,IAAI;AAAA,YAAG,CAAC;AAAA,UAC/E,OAAO;AACL,6BAAiB,kBAAkB,IAAI;AAAA,UACzC;AAEA,qBAAW,QAAQ,SAAU,QAAQ;AACnC,gBAAI,cAAc,kBAAkB,aAAa,OAAO;AACxD,gBAAI,MAAM,QAAQ,WAAW,GAAG;AAC9B,qBAAO,cAAc;AAAA,gBACnB;AAAA,gBAAQ,CAAE,mBAAmB;AAAA,kBAC3B,MAAM;AAAA,kBACN,MAAM;AAAA,kBACN,QAAQ,OAAO;AAAA,kBACf,QAAQ,OAAO;AAAA,gBACjB,CAAC,CAAE,EAAE,OAAQ,WAAY;AAAA,cAC3B;AAAA,YACF,OAAO;AACL,qBAAO;AAAA,gBACL,mBAAmB;AAAA,kBACjB,MAAM;AAAA,kBACN,MAAM;AAAA,kBACN,QAAQ,OAAO;AAAA,kBACf,QAAQ,OAAO;AAAA,gBACjB,CAAC;AAAA,cACH;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAMA,QAAAA,QAAO,UAAU,UAAU,SAAS,UAAW;AAC7C,iBAAO,cAAc,iBAAiB,KAAK,GAAG;AAAA,QAChD;AAOA,QAAAA,QAAO,UAAU,KAAK,SAAS,GAAI,MAAM,aAAa,eAAe;AACnE,cAAI,SAAS;AACb,cAAK,kBAAkB;AAAS,4BAAgB,CAAC;AAEjD,cAAID,QAAO;AACX,cAAI,aAAa,OAAO,cAAc,OAAO,cAAc,iBAAiB,KAAK,KAAK,MAAM,WAAW,CAAC,CAAC;AAEzG,iBAAO;AAAA,YACL,IAAI,SAAU,aAAa,oBAAoB;AAAE,qBAAO,OAAO,GAAG,KAAK,QAAQ,aAAa,oBAAoB,UAAU;AAAA,YAAG;AAAA,YAC7H,MAAM,SAAS,KAAK,OAAO,MAAM;AAC/B,cAAAA,MAAK,KAAK,OAAO,MAAM,EAAE,WAAuB,CAAC;AAAA,YACnD;AAAA,UACF;AAAA,QACF;AAKA,QAAAC,QAAO,UAAU,KAAK,SAAS,OAAQ;AACrC,cAAI,OAAO,CAAC,GAAG,MAAM,UAAU;AAC/B,iBAAQ;AAAQ,iBAAM,GAAI,IAAI,UAAW,GAAI;AAE7C,iBAAO,KAAK,GAAG,MAAM,MAAM,IAAI;AAAA,QACjC;AAMA,QAAAA,QAAO,UAAU,WAAW,SAAS,SAAU,OAAO;AACpD,cAAI,YAAY,cAAc,iBAAiB,KAAK,GAAG;AAEvD,cAAI,UAAU,SAAS;AACrB,sBAAU,QAAQ,SAAU,QAAQ;AAClC,qBAAO,aAAa,YAAY;AAChC,qBAAO,cAAc,YAAY,EAAE,MAAM,SAAS,QAAQ,OAAO,OAAO,CAAC,CAAC;AAAA,YAC5E,CAAC;AAAA,UACH;AAAA,QACF;AAEA,eAAOA;AAAA,MACT,EAAE,WAAW;AAOb,eAAS,KAAK,SAAS,GAAG,KAAK;AAC7B,eAAO,IAAI,SAAS,GAAG;AAAA,MACzB;AAEA,UAAI,SAAS;AACb,UAAI,YAAY;AAChB,UAAI,cAAc;AAElB,MAAAX,SAAQ,SAAS;AACjB,MAAAA,SAAQ,YAAY;AACpB,MAAAA,SAAQ,WAAW;AAEnB,aAAO,eAAeA,UAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAAA,IAE5D,CAAE;AAAA;AAAA;",
  "names": ["global", "exports", "parse", "stringify", "EventTarget", "NetworkBridge", "EventPrototype", "Event", "MessageEvent", "CloseEvent", "WebSocket", "self", "Server"]
}
